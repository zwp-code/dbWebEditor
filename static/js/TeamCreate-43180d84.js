import{u as e}from"./editSpace-e41568fa.js";import{t as a,u as l}from"./teamSelector-758530f1.js";import{u as t}from"./usePlayers-423ca759.js";import{l as o}from"./leagueSelector-14283c2a.js";import{s as m,g as s}from"./util-bc079373.js";import{_ as n}from"./plugin-vue_export-helper-46f75680.js";import{d,r as i,M as r,k as c,t as u,a as p,o as b,c as g,w as f,b as v,h as y,e as h,F as V,f as D,p as k,j as $,i as T,J as x,g as S}from"./index-96665695.js";const U=d({name:"stadiumSelector",components:{},props:{modelValue:{type:String,default:""},filterable:{type:Boolean,default:!0},remote:{type:Boolean,default:!0},multiple:{type:Boolean,default:!1},clearable:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1}},emits:["update:modelValue","change"],setup(a,l){const t=e();let o=i({selectOptions:[],valueName:"",selectLoading:!1,cloneSelectOptions:[]}),m={handleSelectVisible(e){e||(o.selectOptions=o.cloneSelectOptions)},remoteMethod(e){if(""!==e){let a;o.selectLoading=!0,a&&clearTimeout(a),a=setTimeout((()=>{if(o.selectLoading=!1,!isNaN(parseFloat(e))&&isFinite(e))return void(o.selectOptions=o.cloneSelectOptions.filter((a=>a.value==e)));let a=new RegExp(e,"i");o.selectOptions=o.cloneSelectOptions.filter((e=>a.test(e.label)))}),500),l.emit("update:modelValue",o.valueName)}else o.selectOptions=o.cloneSelectOptions},handleChange(e){l.emit("update:modelValue",e),l.emit("change",e)}};return r((()=>a.modelValue),(e=>{o.valueName=a.modelValue})),c((()=>{o.selectOptions=t.getAllStadiumList(),o.cloneSelectOptions=JSON.parse(JSON.stringify(o.selectOptions)),o.valueName=a.modelValue})),{...u(o),...m}}}),C={style:{"margin-right":"8px"}},_={style:{color:"var(--el-text-color-secondary)","font-size":"13px"}};const O=d({name:"TeamCreate",components:{teamSelector:a,leagueSelector:o,stadiumSelector:n(U,[["render",function(e,a,l,t,o,m){const s=p("el-select-v2");return b(),g(s,{modelValue:e.valueName,"onUpdate:modelValue":a[0]||(a[0]=a=>e.valueName=a),filterable:e.filterable,remote:e.remote,multiple:e.multiple,clearable:e.clearable,disabled:e.disabled,options:e.selectOptions,onVisibleChange:e.handleSelectVisible,placeholder:e.$t("message.selectTeamPlaceholder"),onChange:e.handleChange,"remote-method":e.remoteMethod,loading:e.selectLoading},{default:f((({item:e})=>[v("span",C,y(e.value),1),v("span",_,y(e.label),1)])),_:1},8,["modelValue","filterable","remote","multiple","clearable","disabled","options","onVisibleChange","placeholder","onChange","remote-method","loading"])}]])},props:{},setup(a,o){const n=e(),{proxy:d}=S(),r=l(),p=t();let b=i({teamData:null,cloneTeamData:{kits:[]},teamPlayerLineup:[{label:"none",value:"0"}],marks:{10:"10",50:"50",90:"90"},saveloading:!1}),g={handleId(e){b.cloneTeamData.teamid=/^[0-9]*$/.test(parseInt(e))?String(parseInt(e)).replace(".",""):"",parseInt(e)>2e5&&(b.cloneTeamData.teamid="200000")},handleColor(e,a){let l=s(e);b.cloneTeamData[`${a}r`]=l[0],b.cloneTeamData[`${a}g`]=l[1],b.cloneTeamData[`${a}b`]=l[2]},handleKitColor(e,a,l){let t=s(e);b.cloneTeamData.kits[l][`${a}r`]=t[0],b.cloneTeamData.kits[l][`${a}g`]=t[1],b.cloneTeamData.kits[l][`${a}b`]=t[2]},handleValidates:e=>new Promise(((a,l)=>{if(!d.$refs[e])return a(!0),!1;-1===e.indexOf("Kit")?d.$refs[e].validate((e=>{e?a(!0):l(new Error(d.$t("message.checkedFailed")))})):d.$refs[e][0].validate((e=>{e?a(!0):l(new Error(d.$t("message.checkedFailed")))}))})),handleSave(){b.saveloading=!0;Promise.all(["form1","form2","formKit0","formKit1","formKit2"].map((e=>g.handleValidates(e)))).then((()=>{n.addTeamData(b.cloneTeamData),b.saveloading=!1})).catch((e=>{b.saveloading=!1,d.$message.error(d.$t("message.saveFailed")+"-"+e.message)}))},handlePaste(){var e,a;const l=JSON.parse(d.$utils.cache.copyData.get());if(!l.teamid)return d.$message.error(d.$t("message.pasteFailed"));let t=l.teamid;b.teamData=n.data.teams&&n.data.teams.find((e=>e.teamid==t));let o=n.data.teamkits&&JSON.parse(JSON.stringify(n.data.teamkits.filter((e=>e.teamtechid==t))));if(!b.teamData)return d.$message.error(d.$t("message.pasteFailed"));b.cloneTeamData={},Object.keys(b.teamData).forEach((e=>{!isNaN(parseFloat(b.teamData[e]))&&isFinite(b.teamData[e])?"rivalteam"===e||e.endsWith("id")?b.cloneTeamData[e]=b.teamData[e]:b.cloneTeamData[e]=parseInt(b.teamData[e]):b.cloneTeamData[e]=b.teamData[e]})),b.cloneTeamData.leagueid=(null==(e=n.data.leagueteamlinks.find((e=>e.teamid==t)))?void 0:e.leagueid)||"-1",b.cloneTeamData.stadiumid=(null==(a=n.data.teamstadiumlinks.find((e=>e.teamid==t)))?void 0:a.stadiumid)||"-1",b.cloneTeamData.teamcolor1=m([b.teamData.teamcolor1r,b.teamData.teamcolor1g,b.teamData.teamcolor1b]),b.cloneTeamData.teamcolor2=m([b.teamData.teamcolor2r,b.teamData.teamcolor2g,b.teamData.teamcolor2b]),b.cloneTeamData.teamcolor3=m([b.teamData.teamcolor3r,b.teamData.teamcolor3g,b.teamData.teamcolor3b]),o&&o.length?(b.cloneTeamData.kits=[],o.forEach((e=>{e.teamcolorsec=m([e.teamcolorsecr,e.teamcolorsecg,e.teamcolorsecb]),e.teamcolorprim=m([e.teamcolorprimr,e.teamcolorprimg,e.teamcolorprimb]),e.teamcolortert=m([e.teamcolortertr,e.teamcolortertg,e.teamcolortertb]),e.jerseynamecolor=m([e.jerseynamecolorr,e.jerseynamecolorg,e.jerseynamecolorb]),b.cloneTeamData.kits.push(e)}))):b.cloneTeamData.kits=[{teamtechid:t,teamkittypetechid:0},{teamtechid:t,teamkittypetechid:1},{teamtechid:t,teamkittypetechid:2}],d.$message.success(d.$t("message.pasteSucceeded"))}};return c((()=>{for(let e=0;e<3;e++)b.cloneTeamData.kits.push({teamtechid:"",teamkittypetechid:e})})),{...u(b),...g,editSpaceStore:n,...r,...p,setRgbTo16:m}}}),w={class:"full-layout flex-column-center scrollbar routerview",style:{"overflow-y":"auto"}},j={class:"flex-between full-w edit-header"},N={class:"flex-end",style:{"margin-left":"10px"}},P={class:"player-box full-layout"},F={class:"tab-1"},I={style:{margin:"20px 0"}},L={class:"tab-1"},K={style:{margin:"20px 0"}},B={class:"tab-1"},A={class:"flex-between full-h"},J={style:{float:"right"}};var q=n(O,[["render",function(e,a,l,t,o,m){const s=p("ArrowLeftBold"),n=p("el-icon"),d=p("el-button"),i=p("el-input"),r=p("el-form-item"),c=p("stadiumSelector"),u=p("el-input-number"),S=p("el-color-picker"),U=p("teamSelector"),C=p("leagueSelector"),_=p("el-option"),O=p("el-select"),q=p("el-form"),E=p("el-slider"),M=p("el-switch"),R=p("el-empty");return b(),h("div",w,[e.editSpaceStore.isUpload?(b(),h(V,{key:0},[v("div",j,[D(n,{class:"back-icon",onClick:a[0]||(a[0]=a=>e.$router.go(-1))},{default:f((()=>[D(s)])),_:1}),v("div",N,[D(d,{type:"success",onClick:e.handleSave,loading:e.saveloading},{default:f((()=>[$(y(e.$t("message.save")),1)])),_:1},8,["onClick","loading"]),D(d,{type:"primary",onClick:e.handlePaste,style:{"margin-left":"10px"}},{default:f((()=>[$(y(e.$t("message.paste")),1)])),_:1},8,["onClick"])])]),v("div",P,[v("div",F,y(e.$t("message.baseData")),1),v("div",I,[D(q,{ref:"form1","scroll-to-error":"","show-message":!1,"inline-message":"",inline:!0,model:e.cloneTeamData,class:"flex-start flex-warp"},{default:f((()=>[D(r,{label:e.$t("message.teamid"),required:"",prop:"teamid"},{default:f((()=>[D(i,{modelValue:e.cloneTeamData.teamid,"onUpdate:modelValue":a[1]||(a[1]=a=>e.cloneTeamData.teamid=a),onInput:e.handleId},null,8,["modelValue","onInput"])])),_:1},8,["label"]),D(r,{label:e.$t("message.stadium"),required:"",prop:"stadiumid"},{default:f((()=>[D(c,{modelValue:e.cloneTeamData.stadiumid,"onUpdate:modelValue":a[2]||(a[2]=a=>e.cloneTeamData.stadiumid=a)},null,8,["modelValue"])])),_:1},8,["label"]),(b(!0),h(V,null,k(e.$config.teamBaseData,(a=>(b(),g(r,{key:a.label,required:"",prop:a.value?a.value:a.label,label:e.$t(`message.${a.label}`)},{default:f((()=>["input"===a.type?(b(),g(i,{key:0,modelValue:e.cloneTeamData[a.label],"onUpdate:modelValue":l=>e.cloneTeamData[a.label]=l},null,8,["modelValue","onUpdate:modelValue"])):"number"===a.type?(b(),g(u,{key:1,modelValue:e.cloneTeamData[a.label],"onUpdate:modelValue":l=>e.cloneTeamData[a.label]=l,min:a.min,max:a.max},null,8,["modelValue","onUpdate:modelValue","min","max"])):"color"===a.type?(b(),g(S,{key:2,modelValue:e.cloneTeamData[a.label],"onUpdate:modelValue":l=>e.cloneTeamData[a.label]=l,onActiveChange:l=>e.handleColor(l,a.label)},null,8,["modelValue","onUpdate:modelValue","onActiveChange"])):"teamselect"===a.type?(b(),g(U,{key:3,modelValue:e.cloneTeamData[a.label],"onUpdate:modelValue":l=>e.cloneTeamData[a.label]=l},null,8,["modelValue","onUpdate:modelValue"])):"leagueselect"===a.type?(b(),g(C,{key:4,modelValue:e.cloneTeamData[a.value],"onUpdate:modelValue":l=>e.cloneTeamData[a.value]=l},null,8,["modelValue","onUpdate:modelValue"])):"playerselect"===a.type?(b(),g(O,{key:5,modelValue:e.cloneTeamData[a.value],"onUpdate:modelValue":l=>e.cloneTeamData[a.value]=l,multiple:a.multiple,placeholder:e.$t("message.selectPlaceholder")},{default:f((()=>[(b(!0),h(V,null,k(e.teamPlayerLineup,(a=>(b(),g(_,{key:a.value,label:e.$t(`message.${a.label}`),value:a.value},null,8,["label","value"])))),128))])),_:2},1032,["modelValue","onUpdate:modelValue","multiple","placeholder"])):T("",!0)])),_:2},1032,["prop","label"])))),128))])),_:1},8,["model"])]),v("div",L,y(e.$t("message.tactic")),1),v("div",K,[D(q,{ref:"form2","scroll-to-error":"","show-message":!1,"inline-message":"",inline:!0,model:e.cloneTeamData,class:"flex-start flex-warp"},{default:f((()=>[(b(!0),h(V,null,k(e.$config.teamTactic,(a=>(b(),g(r,{key:a.label,required:"",prop:a.value?a.value:a.label,label:e.$t(`message.${a.label}`),style:{"margin-bottom":"30px"}},{default:f((()=>["slide"===a.type?(b(),g(E,{key:0,modelValue:e.cloneTeamData[a.label],"onUpdate:modelValue":l=>e.cloneTeamData[a.label]=l,min:1,max:100,step:1,marks:e.marks},null,8,["modelValue","onUpdate:modelValue","marks"])):"select"===a.type?(b(),g(O,{key:1,modelValue:e.cloneTeamData[a.label],"onUpdate:modelValue":l=>e.cloneTeamData[a.label]=l,placeholder:e.$t("message.selectPlaceholder")},{default:f((()=>[(b(!0),h(V,null,k(a.data,(a=>(b(),g(_,{key:a.value,label:e.$t(`message.${a.label}`),value:a.value},null,8,["label","value"])))),128))])),_:2},1032,["modelValue","onUpdate:modelValue","placeholder"])):T("",!0)])),_:2},1032,["prop","label"])))),128))])),_:1},8,["model"])]),v("div",B,y(e.$t("message.jersey")),1),(b(!0),h(V,null,k(e.cloneTeamData.kits,((a,l)=>(b(),h("div",{style:{margin:"20px 0"},key:a.teamkitid},[v("div",{class:"tab-1",style:x({borderLeftColor:e.setRgbTo16([a.teamcolorsecr,a.teamcolorsecg,a.teamcolorsecb])})},y(e.$t(`message.jersey${a.teamkittypetechid}`)),5),D(q,{ref_for:!0,ref:`formKit${l}`,"scroll-to-error":"","show-message":!1,"inline-message":"",inline:!0,model:a,class:"flex-start flex-warp"},{default:f((()=>[(b(!0),h(V,null,k(e.$config.teamKits,(t=>(b(),g(r,{key:t.label,required:"",prop:t.value?t.value:t.label,label:e.$t(`message.${t.label}`)},{default:f((()=>["number"===t.type?(b(),g(u,{key:0,modelValue:a[t.label],"onUpdate:modelValue":e=>a[t.label]=e,min:t.min,max:t.max},null,8,["modelValue","onUpdate:modelValue","min","max"])):"color"===t.type?(b(),g(S,{key:1,modelValue:a[t.label],"onUpdate:modelValue":e=>a[t.label]=e,onActiveChange:a=>e.handleKitColor(a,t.label,l)},null,8,["modelValue","onUpdate:modelValue","onActiveChange"])):"select"!==t.type||t.iscustom?"select"===t.type&&t.iscustom?(b(),g(O,{key:3,modelValue:a[t.label],"onUpdate:modelValue":e=>a[t.label]=e,multiple:t.multiple,placeholder:e.$t("message.selectPlaceholder")},{default:f((()=>[(b(!0),h(V,null,k(t.data,(e=>(b(),g(_,{key:e.value,label:e.label,value:e.value},{default:f((()=>[v("div",A,[v("span",{style:x({backgroundColor:e.label}),class:"select-color"},null,4),v("span",J,y(e.label),1)])])),_:2},1032,["label","value"])))),128))])),_:2},1032,["modelValue","onUpdate:modelValue","multiple","placeholder"])):"switch"===t.type?(b(),g(M,{key:4,modelValue:a[t.label],"onUpdate:modelValue":e=>a[t.label]=e,"active-value":t.activeValue,"inactive-value":t.inactiveValue,"active-text":e.$t("message.yes"),"inactive-text":e.$t("message.no")},null,8,["modelValue","onUpdate:modelValue","active-value","inactive-value","active-text","inactive-text"])):T("",!0):(b(),g(O,{key:2,modelValue:a[t.label],"onUpdate:modelValue":e=>a[t.label]=e,multiple:t.multiple,placeholder:e.$t("message.selectPlaceholder")},{default:f((()=>[(b(!0),h(V,null,k(t.data,(a=>(b(),g(_,{key:a.value,label:e.$t(`message.${a.label}`),value:a.value},null,8,["label","value"])))),128))])),_:2},1032,["modelValue","onUpdate:modelValue","multiple","placeholder"]))])),_:2},1032,["prop","label"])))),128))])),_:2},1032,["model"])])))),128))])],64)):(b(),g(R,{key:1,description:e.$t("message.errorInfo")},null,8,["description"]))])}],["__scopeId","data-v-45eb2da4"]]);export{q as default};
