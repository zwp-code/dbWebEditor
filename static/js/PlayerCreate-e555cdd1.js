var e=Object.defineProperty,l=Object.defineProperties,a=Object.getOwnPropertyDescriptors,t=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable,s=(l,a,t)=>a in l?e(l,a,{enumerable:!0,configurable:!0,writable:!0,value:t}):l[a]=t,i=(e,l)=>{for(var a in l||(l={}))o.call(l,a)&&s(e,a,l[a]);if(t)for(var a of t(l))r.call(l,a)&&s(e,a,l[a]);return e};import{u as n,a as d}from"./usePlayers-a3ff8e04.js";import{f as p}from"./util-1cafcfb4.js";import{_ as m}from"./plugin-vue_export-helper-46f75680.js";import{d as u,r as c,k as y,t as b,e as f,F as g,b as v,f as V,w as h,h as D,c as $,a as x,o as k,j as w,p as U,C as _,i as O,g as C}from"./index-25d84623.js";const P=u({name:"PlayerCreate",components:{},props:{},setup(e,s){const m=n(),{proxy:u}=C(),f=d();let g=c({playerData:{},selectLoading:!1,selectOptions:[],cloneSelectOptions:[],nationOptions:[]}),v={remoteMethod(e){if(""!==e){let l;g.selectLoading=!0,l&&clearTimeout(l),l=setTimeout((()=>{g.selectLoading=!1;let l=new RegExp(e,"i");g.selectOptions=g.cloneSelectOptions.filter((e=>l.test(e.name)))}),500)}else g.selectOptions=g.cloneSelectOptions},formatDateToCode(e,l){let a=new Date(1970,1,1).getTime(),t=(p(e)-a)/864e5+141428;g.playerData[l]=t},handleSelectVisible(e){e||(g.selectOptions=g.cloneSelectOptions)},handleTraitChange(e,l){if("traitArr1"===l||"traitArr2"===l){let a=0;for(let l=0;l<e.length;l++)a+=e[l];"traitArr1"===l?g.playerData.trait1=a:g.playerData.trait2=a}},getPlayerNameData(){m.data.playernames&&(m.data.playernames.forEach((e=>{g.selectOptions.push({label:e.name,value:parseInt(e.nameid)})})),g.cloneSelectOptions=JSON.parse(JSON.stringify(g.selectOptions)))},getPlayerNationData(){m.data.nations&&m.data.nations.forEach((e=>{""!==e.nationname.trim()&&g.nationOptions.push({label:e.nationname,value:parseInt(e.nationid)})}))},handlePlayerid(e){g.playerData.playerid=/^[0-9]*$/.test(parseInt(e))?String(parseInt(e)).replace(".",""):"",parseInt(e)>3e5&&(g.playerData.playerid="300000")},handleValidates:e=>new Promise(((l,a)=>{if(!u.$refs[e])return l(!0),!1;u.$refs[e].validate((e=>{e?l(!0):a(new Error(u.$t("message.checkedFailed")))}))})),async handleSave(){Promise.all(["form1","form2","form3","form4","form5","form6"].map((e=>v.handleValidates(e)))).then((()=>{const e=g.playerData,{playerjointeamdate1:l,birthdate1:a,traitArr1:s,traitArr2:i}=e,n=((e,l)=>{var a={};for(var s in e)o.call(e,s)&&l.indexOf(s)<0&&(a[s]=e[s]);if(null!=e&&t)for(var s of t(e))l.indexOf(s)<0&&r.call(e,s)&&(a[s]=e[s]);return a})(e,["playerjointeamdate1","birthdate1","traitArr1","traitArr2"]);if(m.addData("players",n,"playerid"))return u.$message.success(u.$t("message.saveSucceeded"));u.$message.error(u.$t("message.saveFailed")+"-"+u.$t("message.playeridRepeat"))})).catch((e=>{u.$message.warning(u.$t("message.saveFailed")+"-"+e.message)}))}};return y((()=>{v.getPlayerNationData(),v.getPlayerNameData();const e=document.querySelector(".scrollbar");e&&e.scrollTo(0,0)})),i((V=i(i({},b(g)),v),l(V,a({editSpaceStore:m}))),f);var V}}),q={class:"full-layout flex-column-center scrollbar routerview",style:{padding:"15px"}},j={class:"flex-between full-w edit-header"},S={class:"flex-end",style:{"margin-left":"10px"}},Y={class:"player-box full-layout"},A={class:"tab-1"},M={style:{margin:"20px 0"}},T={class:"tab-1"},I={style:{margin:"20px 0"}},L={class:"tab-1"},N={style:{margin:"20px 0"}},E={class:"flex-between full-h"},F={style:{float:"right"}},J={class:"tab-1"},R={style:{margin:"20px 0"}},B={class:"flex-between full-h"},z={style:{float:"right"}},G={class:"tab-1"},H={style:{margin:"20px 0"}},K={class:"flex-between full-h"},Q={style:{float:"right"}},W={class:"tab-1"},X={style:{margin:"20px 0"}},Z={class:"flex-start full-h"};var ee=m(P,[["render",function(e,l,a,t,o,r){const s=x("ArrowLeftBold"),i=x("el-icon"),n=x("el-button"),d=x("el-input"),p=x("el-form-item"),m=x("el-select-v2"),u=x("el-input-number"),c=x("el-date-picker"),y=x("el-switch"),b=x("el-form"),C=x("el-slider"),P=x("el-rate"),ee=x("el-option"),le=x("el-select"),ae=x("el-empty");return k(),f("div",q,[e.editSpaceStore.isUpload?(k(),f(g,{key:0},[v("div",j,[V(i,{class:"back-icon",onClick:l[0]||(l[0]=l=>e.$router.go(-1))},{default:h((()=>[V(s)])),_:1}),v("div",S,[V(n,{type:"success",onClick:e.handleSave},{default:h((()=>[w(D(e.$t("message.save")),1)])),_:1},8,["onClick"])])]),v("div",Y,[v("div",A,D(e.$t("message.baseData")),1),v("div",M,[V(b,{ref:"form1","scroll-to-error":"",inline:!0,model:e.playerData,class:"flex-start flex-warp","show-message":!1,"inline-message":""},{default:h((()=>[V(p,{label:e.$t("message.playerids"),required:"",prop:"playerid"},{default:h((()=>[V(d,{modelValue:e.playerData.playerid,"onUpdate:modelValue":l[1]||(l[1]=l=>e.playerData.playerid=l),onInput:e.handlePlayerid},null,8,["modelValue","onInput"])])),_:1},8,["label"]),V(p,{label:e.$t("message.firstname"),required:"",prop:"firstnameid"},{default:h((()=>[V(m,{modelValue:e.playerData.firstnameid,"onUpdate:modelValue":l[2]||(l[2]=l=>e.playerData.firstnameid=l),filterable:"",options:e.selectOptions,onVisibleChange:e.handleSelectVisible,remote:"","remote-method":e.remoteMethod,loading:e.selectLoading},null,8,["modelValue","options","onVisibleChange","remote-method","loading"])])),_:1},8,["label"]),V(p,{label:e.$t("message.lastname"),required:"",prop:"lastnameid"},{default:h((()=>[V(m,{modelValue:e.playerData.lastnameid,"onUpdate:modelValue":l[3]||(l[3]=l=>e.playerData.lastnameid=l),filterable:"",options:e.selectOptions,onVisibleChange:e.handleSelectVisible,remote:"","remote-method":e.remoteMethod,loading:e.selectLoading},null,8,["modelValue","options","onVisibleChange","remote-method","loading"])])),_:1},8,["label"]),V(p,{label:e.$t("message.commonname"),required:"",prop:"commonnameid"},{default:h((()=>[V(m,{modelValue:e.playerData.commonnameid,"onUpdate:modelValue":l[4]||(l[4]=l=>e.playerData.commonnameid=l),filterable:"",options:e.selectOptions,onVisibleChange:e.handleSelectVisible,remote:"","remote-method":e.remoteMethod,loading:e.selectLoading},null,8,["modelValue","options","onVisibleChange","remote-method","loading"])])),_:1},8,["label"]),V(p,{label:e.$t("message.playerjerseyname"),required:"",prop:"playerjerseynameid"},{default:h((()=>[V(m,{modelValue:e.playerData.playerjerseynameid,"onUpdate:modelValue":l[5]||(l[5]=l=>e.playerData.playerjerseynameid=l),filterable:"",options:e.selectOptions,onVisibleChange:e.handleSelectVisible,remote:"","remote-method":e.remoteMethod,loading:e.selectLoading},null,8,["modelValue","options","onVisibleChange","remote-method","loading"])])),_:1},8,["label"]),V(p,{label:e.$t("message.height"),required:"",prop:"height"},{default:h((()=>[V(u,{modelValue:e.playerData.height,"onUpdate:modelValue":l[6]||(l[6]=l=>e.playerData.height=l),min:150,max:215,"step-strictly":""},null,8,["modelValue"])])),_:1},8,["label"]),V(p,{label:e.$t("message.weight"),required:"",prop:"weight"},{default:h((()=>[V(u,{modelValue:e.playerData.weight,"onUpdate:modelValue":l[7]||(l[7]=l=>e.playerData.weight=l),min:50,max:115,"step-strictly":""},null,8,["modelValue"])])),_:1},8,["label"]),V(p,{label:e.$t("message.birthdate"),required:"",prop:"birthdate1"},{default:h((()=>[V(c,{modelValue:e.playerData.birthdate1,"onUpdate:modelValue":l[8]||(l[8]=l=>e.playerData.birthdate1=l),type:"date",format:"YYYY/MM/DD","value-format":"YYYY-MM-DD",onChange:l[9]||(l[9]=l=>e.formatDateToCode(l,"birthdate")),clearable:!1},null,8,["modelValue"])])),_:1},8,["label"]),V(p,{label:e.$t("message.nationality"),required:"",prop:"nationality"},{default:h((()=>[V(m,{modelValue:e.playerData.nationality,"onUpdate:modelValue":l[10]||(l[10]=l=>e.playerData.nationality=l),options:e.nationOptions,filterable:"",clearable:!1},null,8,["modelValue","options"])])),_:1},8,["label"]),V(p,{label:e.$t("message.internationalrep"),required:"",prop:"internationalrep"},{default:h((()=>[V(u,{modelValue:e.playerData.internationalrep,"onUpdate:modelValue":l[11]||(l[11]=l=>e.playerData.internationalrep=l),min:0,max:5,"step-strictly":""},null,8,["modelValue"])])),_:1},8,["label"]),V(p,{label:e.$t("message.isretiring"),required:"",prop:"isretiring"},{default:h((()=>[V(y,{modelValue:e.playerData.isretiring,"onUpdate:modelValue":l[12]||(l[12]=l=>e.playerData.isretiring=l),"active-value":1,"inactive-value":0,"active-text":e.$t("message.yes"),"inactive-text":e.$t("message.no")},null,8,["modelValue","active-text","inactive-text"])])),_:1},8,["label"]),V(p,{label:e.$t("message.playerjointeamdate"),required:"",prop:"playerjointeamdate1"},{default:h((()=>[V(c,{modelValue:e.playerData.playerjointeamdate1,"onUpdate:modelValue":l[13]||(l[13]=l=>e.playerData.playerjointeamdate1=l),type:"date",format:"YYYY/MM/DD","value-format":"YYYY-MM-DD",onChange:l[14]||(l[14]=l=>e.formatDateToCode(l,"playerjointeamdate")),clearable:!1},null,8,["modelValue"])])),_:1},8,["label"]),V(p,{label:e.$t("message.contractvaliduntil"),required:"",prop:"contractvaliduntil"},{default:h((()=>[V(c,{modelValue:e.playerData.contractvaliduntil,"onUpdate:modelValue":l[15]||(l[15]=l=>e.playerData.contractvaliduntil=l),"value-format":"YYYY",type:"year",clearable:!1},null,8,["modelValue"])])),_:1},8,["label"])])),_:1},8,["model"])]),v("div",T,D(e.$t("message.playerAttribute")),1),v("div",I,[V(b,{ref:"form2","scroll-to-error":"","show-message":!1,inline:!0,model:e.playerData,class:"flex-start flex-warp","inline-message":""},{default:h((()=>[(k(!0),f(g,null,U(e.$config.playerAttribute,(l=>(k(),$(p,{key:l,label:e.$t(`message.${l}`),required:"",prop:l},{default:h((()=>[V(C,{modelValue:e.playerData[l],"onUpdate:modelValue":a=>e.playerData[l]=a,min:1,max:99,step:1},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1032,["label","prop"])))),128)),V(p,{label:e.$t("message.weakfootabilitytypecode"),required:"",prop:"weakfootabilitytypecode"},{default:h((()=>[V(P,{modelValue:e.playerData.weakfootabilitytypecode,"onUpdate:modelValue":l[16]||(l[16]=l=>e.playerData.weakfootabilitytypecode=l)},null,8,["modelValue"])])),_:1},8,["label"]),V(p,{label:e.$t("message.skillmoves"),required:"",prop:"skillmoves"},{default:h((()=>[V(P,{modelValue:e.playerData.skillmoves,"onUpdate:modelValue":l[17]||(l[17]=l=>e.playerData.skillmoves=l)},null,8,["modelValue"])])),_:1},8,["label"]),V(p,{label:e.$t("message.attackingworkrat"),required:"",prop:"attackingworkrate"},{default:h((()=>[V(le,{modelValue:e.playerData.attackingworkrate,"onUpdate:modelValue":l[18]||(l[18]=l=>e.playerData.attackingworkrate=l),placeholder:e.$t("message.selectPlaceholder")},{default:h((()=>[(k(!0),f(g,null,U(e.$config.workrateList,(l=>(k(),$(ee,{key:l.value,label:e.$t(`message.${l.label}`),value:l.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue","placeholder"])])),_:1},8,["label"]),V(p,{label:e.$t("message.defensiveworkrate"),required:"",prop:"defensiveworkrate"},{default:h((()=>[V(le,{modelValue:e.playerData.defensiveworkrate,"onUpdate:modelValue":l[19]||(l[19]=l=>e.playerData.defensiveworkrate=l),placeholder:e.$t("message.selectPlaceholder")},{default:h((()=>[(k(!0),f(g,null,U(e.$config.workrateList,(l=>(k(),$(ee,{key:l.value,label:e.$t(`message.${l.label}`),value:l.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue","placeholder"])])),_:1},8,["label"])])),_:1},8,["model"])]),v("div",L,D(e.$t("message.playerAppearance")),1),v("div",N,[V(b,{ref:"form3","scroll-to-error":"","show-message":!1,inline:!0,model:e.playerData,class:"flex-start flex-warp","inline-message":""},{default:h((()=>[(k(!0),f(g,null,U(e.$config.playerAppearance,(l=>(k(),$(p,{key:l.label,label:e.$t(`message.${l.label}`),required:"",prop:l.label},{default:h((()=>["number"===l.type?(k(),$(u,{key:0,modelValue:e.playerData[l.label],"onUpdate:modelValue":a=>e.playerData[l.label]=a,min:l.min,max:l.max},null,8,["modelValue","onUpdate:modelValue","min","max"])):"select"!==l.type||l.iscustom?"select"===l.type&&l.iscustom?(k(),$(le,{key:2,modelValue:e.playerData[l.label],"onUpdate:modelValue":a=>e.playerData[l.label]=a,multiple:l.multiple,placeholder:e.$t("message.selectPlaceholder")},{default:h((()=>[(k(!0),f(g,null,U(l.data,(e=>(k(),$(ee,{key:e.value,label:e.label,value:e.value},{default:h((()=>[v("div",E,[v("span",{style:_({backgroundColor:e.label}),class:"select-color"},null,4),v("span",F,D(e.label),1)])])),_:2},1032,["label","value"])))),128))])),_:2},1032,["modelValue","onUpdate:modelValue","multiple","placeholder"])):"switch"===l.type?(k(),$(y,{key:3,modelValue:e.playerData[l.label],"onUpdate:modelValue":a=>e.playerData[l.label]=a,"active-value":l.activeValue,"inactive-value":l.inactiveValue,"active-text":e.$t("message.yes"),"inactive-text":e.$t("message.no")},null,8,["modelValue","onUpdate:modelValue","active-value","inactive-value","active-text","inactive-text"])):O("",!0):(k(),$(le,{key:1,modelValue:e.playerData[l.label],"onUpdate:modelValue":a=>e.playerData[l.label]=a,multiple:l.multiple,placeholder:e.$t("message.selectPlaceholder")},{default:h((()=>[(k(!0),f(g,null,U(l.data,(l=>(k(),$(ee,{key:l.value,label:e.$t(`message.${l.label}`),value:l.value},null,8,["label","value"])))),128))])),_:2},1032,["modelValue","onUpdate:modelValue","multiple","placeholder"]))])),_:2},1032,["label","prop"])))),128))])),_:1},8,["model"])]),v("div",J,D(e.$t("message.playerAccessories")),1),v("div",R,[V(b,{ref:"form4","scroll-to-error":"","show-message":!1,inline:!0,model:e.playerData,class:"flex-start flex-warp","inline-message":""},{default:h((()=>[(k(!0),f(g,null,U(e.$config.playerAccessories,(l=>(k(),$(p,{key:l.label,label:e.$t(`message.${l.label}`),required:"",prop:l.label},{default:h((()=>["number"===l.type?(k(),$(u,{key:0,modelValue:e.playerData[l.label],"onUpdate:modelValue":a=>e.playerData[l.label]=a,min:l.min,max:l.max},null,8,["modelValue","onUpdate:modelValue","min","max"])):"select"!==l.type||l.iscustom?"select"===l.type&&l.iscustom?(k(),$(le,{key:2,modelValue:e.playerData[l.label],"onUpdate:modelValue":a=>e.playerData[l.label]=a,multiple:l.multiple,placeholder:e.$t("message.selectPlaceholder")},{default:h((()=>[(k(!0),f(g,null,U(l.data,(e=>(k(),$(ee,{key:e.value,label:e.label,value:e.value},{default:h((()=>[v("div",B,[v("span",{style:_({backgroundColor:e.label}),class:"select-color"},null,4),v("span",z,D(e.label),1)])])),_:2},1032,["label","value"])))),128))])),_:2},1032,["modelValue","onUpdate:modelValue","multiple","placeholder"])):"switch"===l.type?(k(),$(y,{key:3,modelValue:e.playerData[l.label],"onUpdate:modelValue":a=>e.playerData[l.label]=a,"active-value":l.activeValue,"inactive-value":l.inactiveValue,"active-text":e.$t("message.yes"),"inactive-text":e.$t("message.no")},null,8,["modelValue","onUpdate:modelValue","active-value","inactive-value","active-text","inactive-text"])):O("",!0):(k(),$(le,{key:1,modelValue:e.playerData[l.label],"onUpdate:modelValue":a=>e.playerData[l.label]=a,multiple:l.multiple,placeholder:e.$t("message.selectPlaceholder")},{default:h((()=>[(k(!0),f(g,null,U(l.data,(l=>(k(),$(ee,{key:l.value,label:e.$t(`message.${l.label}`),value:l.value},null,8,["label","value"])))),128))])),_:2},1032,["modelValue","onUpdate:modelValue","multiple","placeholder"]))])),_:2},1032,["label","prop"])))),128))])),_:1},8,["model"])]),v("div",G,D(e.$t("message.playerTraits")),1),v("div",H,[V(b,{ref:"form5","scroll-to-error":"","show-message":!1,inline:!0,model:e.playerData,class:"flex-start flex-warp","inline-message":""},{default:h((()=>[(k(!0),f(g,null,U(e.$config.playerTraits,(l=>(k(),$(p,{key:l.label,label:e.$t(`message.${l.label}`),required:"",prop:l.label},{default:h((()=>["number"===l.type?(k(),$(u,{key:0,modelValue:e.playerData[l.label],"onUpdate:modelValue":a=>e.playerData[l.label]=a,min:l.min,max:l.max},null,8,["modelValue","onUpdate:modelValue","min","max"])):"select"!==l.type||l.iscustom?"select"===l.type&&l.iscustom?(k(),$(le,{key:2,modelValue:e.playerData[l.label],"onUpdate:modelValue":a=>e.playerData[l.label]=a,multiple:l.multiple,placeholder:e.$t("message.selectPlaceholder")},{default:h((()=>[(k(!0),f(g,null,U(l.data,(e=>(k(),$(ee,{key:e.value,label:e.label,value:e.value},{default:h((()=>[v("div",K,[v("span",{style:_({backgroundColor:e.label}),class:"select-color"},null,4),v("span",Q,D(e.label),1)])])),_:2},1032,["label","value"])))),128))])),_:2},1032,["modelValue","onUpdate:modelValue","multiple","placeholder"])):"switch"===l.type?(k(),$(y,{key:3,modelValue:e.playerData[l.label],"onUpdate:modelValue":a=>e.playerData[l.label]=a,"active-value":l.activeValue,"inactive-value":l.inactiveValue,"active-text":e.$t("message.yes"),"inactive-text":e.$t("message.no")},null,8,["modelValue","onUpdate:modelValue","active-value","inactive-value","active-text","inactive-text"])):O("",!0):(k(),$(le,{key:1,modelValue:e.playerData[l.label],"onUpdate:modelValue":a=>e.playerData[l.label]=a,multiple:l.multiple,"collapse-tags":l.multiple,"collapse-tags-tooltip":l.multiple,"max-collapse-tags":5,clearable:l.clearable,onChange:a=>e.handleTraitChange(a,l.label),placeholder:e.$t("message.selectPlaceholder")},{default:h((()=>[(k(!0),f(g,null,U(l.data,(l=>(k(),$(ee,{key:l.value,label:e.$t(`message.${l.label}`),value:l.value},null,8,["label","value"])))),128))])),_:2},1032,["modelValue","onUpdate:modelValue","multiple","collapse-tags","collapse-tags-tooltip","clearable","onChange","placeholder"]))])),_:2},1032,["label","prop"])))),128))])),_:1},8,["model"])]),v("div",W,D(e.$t("message.other")),1),v("div",X,[V(b,{ref:"form6","scroll-to-error":"","show-message":!1,inline:!0,model:e.playerData,class:"flex-start flex-warp","inline-message":""},{default:h((()=>[(k(!0),f(g,null,U(e.$config.playerOtherData,(l=>(k(),$(p,{key:l.label,label:e.$t(`message.${l.label}`),required:"",prop:l.label},{default:h((()=>["number"===l.type?(k(),$(u,{key:0,modelValue:e.playerData[l.label],"onUpdate:modelValue":a=>e.playerData[l.label]=a,min:l.min,max:l.max},null,8,["modelValue","onUpdate:modelValue","min","max"])):"select"!==l.type||l.iscustom?"select"===l.type&&l.iscustom?(k(),$(le,{key:2,modelValue:e.playerData[l.label],"onUpdate:modelValue":a=>e.playerData[l.label]=a,multiple:l.multiple,placeholder:e.$t("message.selectPlaceholder")},{default:h((()=>[(k(!0),f(g,null,U(l.data,(e=>(k(),$(ee,{key:e.value,label:e.label,value:e.value},{default:h((()=>[v("div",Z,[v("span",{style:_({backgroundColor:e.label}),class:"select-color"},null,4)])])),_:2},1032,["label","value"])))),128))])),_:2},1032,["modelValue","onUpdate:modelValue","multiple","placeholder"])):"switch"===l.type?(k(),$(y,{key:3,modelValue:e.playerData[l.label],"onUpdate:modelValue":a=>e.playerData[l.label]=a,"active-value":l.activeValue,"inactive-value":l.inactiveValue,"active-text":e.$t("message.yes"),"inactive-text":e.$t("message.no")},null,8,["modelValue","onUpdate:modelValue","active-value","inactive-value","active-text","inactive-text"])):O("",!0):(k(),$(le,{key:1,modelValue:e.playerData[l.label],"onUpdate:modelValue":a=>e.playerData[l.label]=a,multiple:l.multiple,placeholder:e.$t("message.selectPlaceholder")},{default:h((()=>[(k(!0),f(g,null,U(l.data,(l=>(k(),$(ee,{key:l.value,label:e.$t(`message.${l.label}`),value:l.value},null,8,["label","value"])))),128))])),_:2},1032,["modelValue","onUpdate:modelValue","multiple","placeholder"]))])),_:2},1032,["label","prop"])))),128))])),_:1},8,["model"])])])],64)):(k(),$(ae,{key:1,description:e.$t("message.errorInfo")},null,8,["description"]))])}],["__scopeId","data-v-03aa59a4"]]);export{ee as default};
