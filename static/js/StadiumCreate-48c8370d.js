import{u as e}from"./editSpace-ebec7ddd.js";import{t as a,u as t}from"./teamSelector-4f5c49d7.js";import{u as l}from"./usePlayers-0da3b7d3.js";import{n as d}from"./nationSelector-e0277275.js";import{_ as s}from"./plugin-vue_export-helper-46f75680.js";import{d as o,r as i,k as m,t as n,e as u,F as r,b as c,f as p,w as f,h as g,c as y,a as S,o as D,j as b,p as h,i as v,g as $}from"./index-7761de70.js";const V=o({name:"StadiumCreate",components:{teamSelector:a,nationSelector:d},props:{},setup(a,d){const s=e(),{proxy:o}=$(),u=t(),r=l();let c=i({satdiumData:{},cloneStadiumData:{yearbuilt:"",name:"",timeofday3:5,adboardsidelinedistance:360,stadiumgloalnetdepth:229,hometeamid:"-1",capacity:"",seatcolor:1,sectionfacedbydefault:0,policetypecode:1,timeofday4:5,stadiumpitchlength:10500,stadiumgoalnetstyle:0,tod4weather:0,countrycode:"-1",stadiummowpattern_code:1,stadiumid:"",cameraheight:15,stadiumgoalnettype:0,citycode:0,stadiumpitchwidth:6800,stadiumtype:0,stadiumgoalnettension:0,tod1weather:0,dlc:0,tod2weather:0,camerazoom:9,adboardendlinedistance:600,iseditable:0,isdynamic:1,tod3weather:0,genericrank:-1,timeofday1:1,timeofday2:3,stadiumgoalnetwidth:744,stadiumgoalnetlength:250},isNotFound:!1,saveloading:!1}),p={handleId(e){c.cloneStadiumData.stadiumid=/^[0-9]*$/.test(parseInt(e))?String(parseInt(e)).replace(".",""):"",parseInt(e)>511&&(c.cloneStadiumData.stadiumid="511")},handleValidates:e=>new Promise(((a,t)=>{if(!o.$refs[e])return a(!0),!1;o.$refs[e].validate((e=>{e?a(!0):t(new Error(o.$t("message.checkedFailed")))}))})),async handleSave(){c.saveloading=!0,Promise.all(["form1","form2"].map((e=>p.handleValidates(e)))).then((()=>{"-1"==c.cloneStadiumData.hometeamid&&(c.cloneStadiumData.hometeamid="0"),"-1"==c.cloneStadiumData.countrycode&&(c.cloneStadiumData.countrycode="0");const e=s.addData("stadiums",c.cloneStadiumData,"stadiumid");if(c.saveloading=!1,e)return o.$message.success(o.$t("message.saveSucceeded"));o.$message.error(o.$t("message.saveFailed")+"-"+o.$t("message.idrepeat"))})).catch((e=>{c.saveloading=!1,o.$message.error(o.$t("message.saveFailed")+"-"+e.message)}))},handlePaste(){let e=JSON.parse(o.$utils.cache.copyData.get());if(e&&e.stadiumid)return c.satdiumData={...e},c.cloneStadiumData={},Object.keys(c.satdiumData).forEach((e=>{!isNaN(parseFloat(c.satdiumData[e]))&&isFinite(c.satdiumData[e])?"countrycode"===e||e.endsWith("id")?c.cloneStadiumData[e]=c.satdiumData[e]:c.cloneStadiumData[e]=parseInt(c.satdiumData[e]):c.cloneStadiumData[e]=c.satdiumData[e]})),c.cloneStadiumData.stadiumid="",o.$message.success(o.$t("message.pasteSucceeded"));o.$message.error(o.$t("message.pasteFailed"))}};return m((()=>{})),{...n(c),...p,editSpaceStore:s,...u,...r}}}),x={class:"full-layout flex-column-center scrollbar routerview",style:{"overflow-y":"auto"}},k={class:"flex-between full-w edit-header"},w={class:"flex-end",style:{"margin-left":"10px"}},_={class:"player-box full-layout"},U={class:"tab-1"},I={style:{margin:"20px 0"}},j={class:"tab-1"},F={style:{margin:"20px 0"}};var C=s(V,[["render",function(e,a,t,l,d,s){const o=S("ArrowLeftBold"),i=S("el-icon"),m=S("el-button"),n=S("el-input"),$=S("el-form-item"),V=S("el-input-number"),C=S("teamSelector"),P=S("nationSelector"),N=S("el-form"),q=S("el-empty");return D(),u("div",x,[e.editSpaceStore.isUpload?(D(),u(r,{key:0},[c("div",k,[p(i,{class:"back-icon",onClick:a[0]||(a[0]=a=>e.$router.go(-1))},{default:f((()=>[p(o)])),_:1}),c("div",w,[p(m,{type:"success",onClick:e.handleSave,loading:e.saveloading},{default:f((()=>[b(g(e.$t("message.save")),1)])),_:1},8,["onClick","loading"]),p(m,{type:"primary",style:{"margin-left":"10px"},onClick:e.handlePaste},{default:f((()=>[b(g(e.$t("message.paste")),1)])),_:1},8,["onClick"])])]),c("div",_,[c("div",U,g(e.$t("message.baseData")),1),c("div",I,[p(N,{inline:!0,ref:"form1","scroll-to-error":"",model:e.cloneStadiumData,"show-message":!1,"inline-message":"",class:"flex-start flex-warp"},{default:f((()=>[p($,{label:e.$t("message.stadiumid"),required:"",prop:"stadiumid"},{default:f((()=>[p(n,{modelValue:e.cloneStadiumData.stadiumid,"onUpdate:modelValue":a[1]||(a[1]=a=>e.cloneStadiumData.stadiumid=a),onInput:e.handleId},null,8,["modelValue","onInput"])])),_:1},8,["label"]),(D(!0),u(r,null,h(e.$config.stadiumBaseData,(a=>(D(),y($,{required:"",key:a.label,prop:a.value?a.value:a.label,label:e.$t(`message.${a.label}`)},{default:f((()=>["input"===a.type?(D(),y(n,{key:0,modelValue:e.cloneStadiumData[a.label],"onUpdate:modelValue":t=>e.cloneStadiumData[a.label]=t},null,8,["modelValue","onUpdate:modelValue"])):"number"===a.type?(D(),y(V,{key:1,modelValue:e.cloneStadiumData[a.label],"onUpdate:modelValue":t=>e.cloneStadiumData[a.label]=t,min:a.min,max:a.max},null,8,["modelValue","onUpdate:modelValue","min","max"])):"teamselect"===a.type?(D(),y(C,{key:2,modelValue:e.cloneStadiumData[a.value],"onUpdate:modelValue":t=>e.cloneStadiumData[a.value]=t},null,8,["modelValue","onUpdate:modelValue"])):"nationselect"===a.type?(D(),y(P,{key:3,modelValue:e.cloneStadiumData[a.value],"onUpdate:modelValue":t=>e.cloneStadiumData[a.value]=t},null,8,["modelValue","onUpdate:modelValue"])):v("",!0)])),_:2},1032,["prop","label"])))),128))])),_:1},8,["model"])]),c("div",j,g(e.$t("message.other")),1),c("div",F,[p(N,{ref:"form2","scroll-to-error":"",inline:!0,model:e.cloneStadiumData,"show-message":!1,"inline-message":"",class:"flex-start flex-warp"},{default:f((()=>[(D(!0),u(r,null,h(e.$config.satdiumOtherData,(a=>(D(),y($,{required:"",key:a.label,prop:a.label,label:e.$t(`message.${a.label}`),style:{"margin-bottom":"30px"}},{default:f((()=>["number"===a.type?(D(),y(V,{key:0,modelValue:e.cloneStadiumData[a.label],"onUpdate:modelValue":t=>e.cloneStadiumData[a.label]=t,min:a.min,max:a.max},null,8,["modelValue","onUpdate:modelValue","min","max"])):v("",!0)])),_:2},1032,["prop","label"])))),128))])),_:1},8,["model"])])])],64)):(D(),y(q,{key:1,description:e.$t("message.errorInfo")},null,8,["description"]))])}],["__scopeId","data-v-625559c8"]]);export{C as default};
