var e=Object.defineProperty,a=Object.defineProperties,l=Object.getOwnPropertyDescriptors,t=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,m=Object.prototype.propertyIsEnumerable,i=(a,l,t)=>l in a?e(a,l,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[l]=t,s=(e,a)=>{for(var l in a||(a={}))o.call(a,l)&&i(e,l,a[l]);if(t)for(var l of t(a))m.call(a,l)&&i(e,l,a[l]);return e},r=(e,t)=>a(e,l(t));import{_ as d}from"./lineup-cdc0ea31.js";import{_ as n}from"./notflag-60268a62.js";import{_ as c}from"./team_notfound-5b1be68a.js";import{u,s as p,h as g}from"./editSpace-4390666c.js";import{u as b,t as f}from"./teamSelector-a6150c37.js";import{u as y}from"./usePlayers-44379f82.js";import{l as v}from"./leagueSelector-65c04b96.js";import{_ as D}from"./plugin-vue_export-helper-46f75680.js";import{d as h,r as k,k as V,t as T,a as $,o as x,c as S,w as C,b as _,f as U,j,h as w,N as L,e as N,F as P,l as O,i as q,L as A,g as F}from"./index-34fbc855.js";const E=h({name:"StadiumSelectDialog",components:{},props:{visible:{type:Boolean,default:!1},stadium:{type:String,default:"-1"}},emits:["close","save"],setup(e,a){const l=u();let t=k({dialogVisible:e.visible,stadiumList:l.getAllStadiumList(),currentStadium:{}}),o={handleClose(){o.getCurrentStadium(),t.dialogVisible=!1,a.emit("close")},handleConfirm(){a.emit("save",t.currentStadium.value),t.dialogVisible=!1,a.emit("close")},getCurrentStadium(){let a=t.stadiumList.find((a=>a.value==e.stadium));t.currentStadium=a||{value:"-1",label:"No Stadium"}},handleChange(e){let a=t.stadiumList.findIndex((e=>e.value==t.currentStadium.value));if(e>0){let e=a+1;e>t.stadiumList.length-1&&(e=0),t.currentStadium=t.stadiumList[e]}else{let e=a-1;e<0&&(e=t.stadiumList.length-1),t.currentStadium=t.stadiumList[e]}}};return V((()=>{o.getCurrentStadium()})),s(s(s({},T(t)),o),b())}}),I={class:"flex-column-center"},B={class:"stadium-selector-box"},z={class:"flex-center"},J={class:"stadium-img-box"},K={class:"flex-center"},H={style:{"margin-top":"20px"}},R={class:"dialog-footer"};const M=h({name:"TeamEdit",components:{teamSelector:f,leagueSelector:v,StadiumSelectDialog:D(E,[["render",function(e,a,l,t,o,m){const i=$("CaretLeft"),s=$("el-icon"),r=$("el-image"),d=$("CaretRight"),n=$("el-button"),c=$("el-dialog");return x(),S(c,{modelValue:e.dialogVisible,"onUpdate:modelValue":a[2]||(a[2]=a=>e.dialogVisible=a),title:e.$t("message.stadiumselect"),"before-close":e.handleClose,class:"z-dialog",center:"",width:500},{footer:C((()=>[_("span",R,[U(n,{onClick:e.handleClose},{default:C((()=>[j(w(e.$t("message.cancel")),1)])),_:1},8,["onClick"]),U(n,{type:"primary",onClick:e.handleConfirm},{default:C((()=>[j(w(e.$t("message.confirm")),1)])),_:1},8,["onClick"])])])),default:C((()=>[_("div",I,[_("div",B,[_("div",z,[U(s,{onClick:a[0]||(a[0]=a=>e.handleChange(-1))},{default:C((()=>[U(i)])),_:1})]),_("div",J,[U(r,{style:{height:"100%",width:"100%"},lazy:"",src:e.getStadiumBackground(e.currentStadium.value),fit:"cover"},null,8,["src"])]),_("div",K,[U(s,{onClick:a[1]||(a[1]=a=>e.handleChange(1))},{default:C((()=>[U(d)])),_:1})])]),_("p",H,w(e.currentStadium.label),1)])])),_:1},8,["modelValue","title","before-close"])}],["__scopeId","data-v-5eb4752e"]])},props:{},setup(e,a){const l=u(),{proxy:i}=F(),d=b(),n=y();let c=k({teamData:null,cloneTeamData:null,isNotFound:!1,teamPlayerLineup:null,marks:{10:"10",50:"50",90:"90"},stadiumVisible:!1,saveloading:!1}),f={handleColor(e,a){let l=g(e);c.cloneTeamData[`${a}r`]=l[0],c.cloneTeamData[`${a}g`]=l[1],c.cloneTeamData[`${a}b`]=l[2]},handleKitColor(e,a,l){let t=g(e);c.cloneTeamData.kits[l][`${a}r`]=t[0],c.cloneTeamData.kits[l][`${a}g`]=t[1],c.cloneTeamData.kits[l][`${a}b`]=t[2]},getTeamData(){var e,a;const t=i.$route.query.teamid;c.teamData=l.data.teams&&l.data.teams.find((e=>e.teamid==t));let o=l.data.teamkits&&JSON.parse(JSON.stringify(l.data.teamkits.filter((e=>e.teamtechid==t))));if(!c.teamData)return c.isNotFound=!0,void i.$message.warning(`${i.$t("message.notfoundteam")}`);c.cloneTeamData={},Object.keys(c.teamData).forEach((e=>{!isNaN(parseFloat(c.teamData[e]))&&isFinite(c.teamData[e])?"rivalteam"===e||e.endsWith("id")?c.cloneTeamData[e]=c.teamData[e]:c.cloneTeamData[e]=parseInt(c.teamData[e]):c.cloneTeamData[e]=c.teamData[e]})),c.cloneTeamData.leagueid=(null==(e=l.data.leagueteamlinks.find((e=>e.teamid==t)))?void 0:e.leagueid)||"-1",c.cloneTeamData.stadiumid=(null==(a=l.data.teamstadiumlinks.find((e=>e.teamid==t)))?void 0:a.stadiumid)||"-1",c.cloneTeamData.teamcolor1=p([c.teamData.teamcolor1r,c.teamData.teamcolor1g,c.teamData.teamcolor1b]),c.cloneTeamData.teamcolor2=p([c.teamData.teamcolor2r,c.teamData.teamcolor2g,c.teamData.teamcolor2b]),c.cloneTeamData.teamcolor3=p([c.teamData.teamcolor3r,c.teamData.teamcolor3g,c.teamData.teamcolor3b]),o&&o.length?(c.cloneTeamData.kits=[],o.forEach((e=>{e.teamcolorsec=p([e.teamcolorsecr,e.teamcolorsecg,e.teamcolorsecb]),e.teamcolorprim=p([e.teamcolorprimr,e.teamcolorprimg,e.teamcolorprimb]),e.teamcolortert=p([e.teamcolortertr,e.teamcolortertg,e.teamcolortertb]),e.jerseynamecolor=p([e.jerseynamecolorr,e.jerseynamecolorg,e.jerseynamecolorb]),c.cloneTeamData.kits.push(e)}))):c.cloneTeamData.kits=[{teamtechid:t,teamkittypetechid:0},{teamtechid:t,teamkittypetechid:1},{teamtechid:t,teamkittypetechid:2}]},getTeamPlayerLineup(){const e=i.$route.query.teamid;if(!l.data.teamplayerlinks)return;let a=l.data.teamplayerlinks.map((a=>{let t=null;a.teamid==e&&(t=l.data.players.find((e=>e.playerid==a.playerid)));let o=t?n.getPlayerName.value(t.firstnameid,t.lastnameid,t.commonnameid):"";return t?{label:o,value:a.playerid,playerdata:t}:null}));c.teamPlayerLineup=a.filter(Boolean)},handleSave(){c.saveloading=!0;const e=JSON.parse(JSON.stringify(c.cloneTeamData)),{leagueid:a,stadiumid:i,teamcolor1:s,teamcolor2:r,teamcolor3:d,kits:n}=e,u=((e,a)=>{var l={};for(var i in e)o.call(e,i)&&a.indexOf(i)<0&&(l[i]=e[i]);if(null!=e&&t)for(var i of t(e))a.indexOf(i)<0&&m.call(e,i)&&(l[i]=e[i]);return l})(e,["leagueid","stadiumid","teamcolor1","teamcolor2","teamcolor3","kits"]);n.forEach((e=>{delete e.teamcolorprim,delete e.teamcolorsec,delete e.teamcolortert,delete e.jerseynamecolor})),l.saveTeamData(u,{leagueid:a,stadiumid:i,kits:n}),c.saveloading=!1},handleHide(){l.addHideList({sourceName:i.$route.name,sourceKey:"teamid",sourceID:i.$route.query.teamid,sourceType:d.getTeamAvatar.value(i.$route.query.teamid),sourceLabel:d.getTeamName.value(i.$route.query.teamid)}),i.$message.success(i.$t("message.hideSucceeded"))}};return V((()=>{f.getTeamPlayerLineup(),f.getTeamData()})),L((()=>i.$route.query.teamid),(e=>{e&&0!=e&&(f.getTeamPlayerLineup(),f.getTeamData())})),r(s(s(r(s(s({},T(c)),f),{editSpaceStore:l}),d),n),{setRgbTo16:p})}}),W={class:"full-layout flex-column-center scrollbar routerview",style:{"overflow-y":"auto"}},G={class:"flex-between full-w edit-header"},Q={class:"flex-end",style:{"margin-left":"10px"}},X={class:"player-box full-layout"},Y={class:"flex-between flex-warp"},Z={class:"flex-start",style:{"align-items":"flex-end"}},ee={class:"player-avatar"},ae={class:"image-slot"},le=["src"],te={class:"image-slot"},oe=["src"],me={class:"flex-column-end player-info"},ie={class:"player-name text-left"},se={class:"flex-start"},re=["src"],de={class:"player-formation"},ne={class:"flex-between player-team"},ce={class:"img-box",style:{height:"80px"}},ue=["src","title"],pe=["src","title"],ge={class:"tab-1"},be={style:{margin:"20px 0"}},fe={class:"tab-1"},ye={style:{margin:"20px 0"}},ve={class:"tab-1"},De={class:"flex-between full-h"},he={style:{float:"right"}};var ke=D(M,[["render",function(e,a,l,t,o,m){const i=$("ArrowLeftBold"),s=$("el-icon"),r=$("el-button"),u=$("el-skeleton"),p=$("el-empty"),g=$("el-image"),b=$("el-avatar"),f=$("el-input"),y=$("el-input-number"),v=$("el-color-picker"),D=$("teamSelector"),h=$("leagueSelector"),k=$("el-option"),V=$("el-select"),T=$("el-form-item"),L=$("el-form"),F=$("el-slider"),E=$("el-switch"),I=$("StadiumSelectDialog");return x(),N("div",W,[e.editSpaceStore.isUpload?(x(),N(P,{key:0},[_("div",G,[U(s,{class:"back-icon",onClick:a[0]||(a[0]=a=>e.$router.go(-1))},{default:C((()=>[U(i)])),_:1}),_("div",Q,[U(r,{type:"info",onClick:e.handleHide},{default:C((()=>[j(w(e.$t("message.hide")),1)])),_:1},8,["onClick"]),U(r,{type:"success",onClick:e.handleSave,loading:e.saveloading},{default:C((()=>[j(w(e.$t("message.save")),1)])),_:1},8,["onClick","loading"])])]),_("div",X,[e.teamData||e.isNotFound?!e.teamData&&e.isNotFound?(x(),S(p,{key:1,description:e.$t("message.notfoundteam")},null,8,["description"])):(x(),N(P,{key:2},[_("div",Y,[_("div",Z,[_("div",ee,[U(g,{style:{height:"100%",width:"100%"},lazy:"",src:e.getTeamAvatar(e.teamData.teamid,120),fit:"cover"},{placeholder:C((()=>[_("div",ae,[_("img",{src:c,style:{"object-fit":"cover"}},null,8,le)])])),error:C((()=>[_("div",te,[_("img",{src:c,style:{"object-fit":"cover"}},null,8,oe)])])),_:1},8,["src"])]),_("div",me,[_("p",ie,w(e.teamData.teamname+`  (${e.teamData.teamid})`),1),_("div",se,[U(b,{shape:"square",size:24,style:{width:"24px",height:"16px"},fit:"cover",src:e.getTeamNationFlag(e.teamData.teamid),onError:e=>!0},{default:C((()=>[_("img",{src:n},null,8,re)])),_:1},8,["src"]),_("span",de,w(e.getTeamLeagueName(e.teamData.teamid)),1)])])]),_("div",ne,[_("div",ce,[_("img",{src:d,onClick:a[1]||(a[1]=a=>e.$router.push({name:"teamLineupEdit",query:{teamid:e.cloneTeamData.teamid}})),style:{transform:"rotate(90deg)"},title:e.$t("message.lineupManagement")},null,8,ue)]),_("div",{class:"img-box",onClick:a[2]||(a[2]=a=>e.stadiumVisible=!0)},[_("img",{src:"/static/png/stadium-a3169e20.png",title:e.$t("message.stadiumManagement")},null,8,pe)])])]),e.cloneTeamData&&e.cloneTeamData.teamid?(x(),N(P,{key:0},[_("div",ge,w(e.$t("message.baseData")),1),_("div",be,[U(L,{inline:!0,model:e.cloneTeamData,class:"flex-start flex-warp"},{default:C((()=>[(x(!0),N(P,null,O(e.$config.teamBaseData,(a=>(x(),S(T,{key:a.label,label:e.$t(`message.${a.label}`)},{default:C((()=>["input"===a.type?(x(),S(f,{key:0,modelValue:e.cloneTeamData[a.label],"onUpdate:modelValue":l=>e.cloneTeamData[a.label]=l},null,8,["modelValue","onUpdate:modelValue"])):"number"===a.type?(x(),S(y,{key:1,modelValue:e.cloneTeamData[a.label],"onUpdate:modelValue":l=>e.cloneTeamData[a.label]=l,min:a.min,max:a.max},null,8,["modelValue","onUpdate:modelValue","min","max"])):"color"===a.type?(x(),S(v,{key:2,modelValue:e.cloneTeamData[a.label],"onUpdate:modelValue":l=>e.cloneTeamData[a.label]=l,onActiveChange:l=>e.handleColor(l,a.label)},null,8,["modelValue","onUpdate:modelValue","onActiveChange"])):"teamselect"===a.type?(x(),S(D,{key:3,modelValue:e.cloneTeamData[a.label],"onUpdate:modelValue":l=>e.cloneTeamData[a.label]=l},null,8,["modelValue","onUpdate:modelValue"])):"leagueselect"===a.type?(x(),S(h,{key:4,modelValue:e.cloneTeamData[a.value],"onUpdate:modelValue":l=>e.cloneTeamData[a.value]=l},null,8,["modelValue","onUpdate:modelValue"])):"playerselect"===a.type?(x(),S(V,{key:5,modelValue:e.cloneTeamData[a.value],"onUpdate:modelValue":l=>e.cloneTeamData[a.value]=l,multiple:a.multiple,placeholder:e.$t("message.selectPlaceholder")},{default:C((()=>[(x(!0),N(P,null,O(e.teamPlayerLineup,(e=>(x(),S(k,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:2},1032,["modelValue","onUpdate:modelValue","multiple","placeholder"])):q("",!0)])),_:2},1032,["label"])))),128))])),_:1},8,["model"])]),_("div",fe,w(e.$t("message.tactic")),1),_("div",ye,[U(L,{inline:!0,model:e.cloneTeamData,class:"flex-start flex-warp"},{default:C((()=>[(x(!0),N(P,null,O(e.$config.teamTactic,(a=>(x(),S(T,{key:a.label,label:e.$t(`message.${a.label}`),style:{"margin-bottom":"30px"}},{default:C((()=>["slide"===a.type?(x(),S(F,{key:0,modelValue:e.cloneTeamData[a.label],"onUpdate:modelValue":l=>e.cloneTeamData[a.label]=l,min:1,max:100,step:1,marks:e.marks},null,8,["modelValue","onUpdate:modelValue","marks"])):"select"===a.type?(x(),S(V,{key:1,modelValue:e.cloneTeamData[a.label],"onUpdate:modelValue":l=>e.cloneTeamData[a.label]=l,placeholder:e.$t("message.selectPlaceholder")},{default:C((()=>[(x(!0),N(P,null,O(a.data,(a=>(x(),S(k,{key:a.value,label:e.$t(`message.${a.label}`),value:a.value},null,8,["label","value"])))),128))])),_:2},1032,["modelValue","onUpdate:modelValue","placeholder"])):q("",!0)])),_:2},1032,["label"])))),128))])),_:1},8,["model"])]),_("div",ve,w(e.$t("message.jersey")),1),(x(!0),N(P,null,O(e.cloneTeamData.kits,((a,l)=>(x(),N("div",{style:{margin:"20px 0"},key:a.teamkitid},[_("div",{class:"tab-1",style:A({borderLeftColor:e.setRgbTo16([a.teamcolorsecr,a.teamcolorsecg,a.teamcolorsecb])})},w(e.$t(`message.jersey${a.teamkittypetechid}`)),5),U(L,{inline:!0,model:a,class:"flex-start flex-warp"},{default:C((()=>[(x(!0),N(P,null,O(e.$config.teamKits,(t=>(x(),S(T,{key:t.label,label:e.$t(`message.${t.label}`)},{default:C((()=>["number"===t.type?(x(),S(y,{key:0,modelValue:a[t.label],"onUpdate:modelValue":e=>a[t.label]=e,min:t.min,max:t.max},null,8,["modelValue","onUpdate:modelValue","min","max"])):"color"===t.type?(x(),S(v,{key:1,modelValue:a[t.label],"onUpdate:modelValue":e=>a[t.label]=e,onActiveChange:a=>e.handleKitColor(a,t.label,l)},null,8,["modelValue","onUpdate:modelValue","onActiveChange"])):"select"!==t.type||t.iscustom?"select"===t.type&&t.iscustom?(x(),S(V,{key:3,modelValue:a[t.label],"onUpdate:modelValue":e=>a[t.label]=e,multiple:t.multiple,placeholder:e.$t("message.selectPlaceholder")},{default:C((()=>[(x(!0),N(P,null,O(t.data,(e=>(x(),S(k,{key:e.value,label:e.label,value:e.value},{default:C((()=>[_("div",De,[_("span",{style:A({backgroundColor:e.label}),class:"select-color"},null,4),_("span",he,w(e.label),1)])])),_:2},1032,["label","value"])))),128))])),_:2},1032,["modelValue","onUpdate:modelValue","multiple","placeholder"])):"switch"===t.type?(x(),S(E,{key:4,modelValue:a[t.label],"onUpdate:modelValue":e=>a[t.label]=e,"active-value":t.activeValue,"inactive-value":t.inactiveValue,"active-text":e.$t("message.yes"),"inactive-text":e.$t("message.no")},null,8,["modelValue","onUpdate:modelValue","active-value","inactive-value","active-text","inactive-text"])):q("",!0):(x(),S(V,{key:2,modelValue:a[t.label],"onUpdate:modelValue":e=>a[t.label]=e,multiple:t.multiple,placeholder:e.$t("message.selectPlaceholder")},{default:C((()=>[(x(!0),N(P,null,O(t.data,(a=>(x(),S(k,{key:a.value,label:e.$t(`message.${a.label}`),value:a.value},null,8,["label","value"])))),128))])),_:2},1032,["modelValue","onUpdate:modelValue","multiple","placeholder"]))])),_:2},1032,["label"])))),128))])),_:2},1032,["model"])])))),128))],64)):q("",!0)],64)):(x(),S(u,{key:0,rows:20,animated:""}))])],64)):(x(),S(p,{key:1,description:e.$t("message.errorInfo")},null,8,["description"])),e.stadiumVisible?(x(),S(I,{key:2,visible:e.stadiumVisible,stadium:e.cloneTeamData.stadiumid,onSave:a[3]||(a[3]=a=>e.cloneTeamData.stadiumid=a),onClose:a[4]||(a[4]=a=>e.stadiumVisible=!1)},null,8,["visible","stadium"])):q("",!0)])}],["__scopeId","data-v-588a4f91"]]);export{ke as default};
