import{d as e,_ as a,o as l,e as t,b as s,r,k as i,l as n,t as o,O as d,i as c,q as u,g as p,a as m,h as y,f,w as g,J as v,M as h,c as b,P as D,Q as x,j as w,F as C,p as P,R as k,S,L as T,U as $,D as V,E as _}from"./index-96665695.js";import{u as N}from"./editSpace-e41568fa.js";import{t as O,u as E}from"./teamSelector-758530f1.js";import{u as j}from"./usePlayers-423ca759.js";import{_ as F}from"./plugin-vue_export-helper-46f75680.js";import{c as L,v as q,h as M}from"./util-bc079373.js";import{t as A,_ as B}from"./team_notfound-3d3bda0d.js";import{n as J,_ as z}from"./notflag-b23e2cb5.js";import{n as I,_ as U}from"./notfound-50e1009a.js";import R from"./PlayerEdit-52e307ab.js";const H=e({name:"ArrowRightBold"}),W={viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},K=[s("path",{fill:"currentColor",d:"M338.752 104.704a64 64 0 0 0 0 90.496l316.8 316.8-316.8 316.8a64 64 0 0 0 90.496 90.496l362.048-362.048a64 64 0 0 0 0-90.496L429.248 104.704a64 64 0 0 0-90.496 0z"},null,-1)];var X=a(H,[["render",function(e,a,s,r,i,n){return l(),t("svg",W,K)}]]);const Y=e({name:"Marquees",components:{},props:{},setup(e,a){const{proxy:l}=p();let t=r({needToScroll:!1,text:"",_checkTimer:null}),s={check(){l.$nextTick((()=>{let e=s.isOverflow();t.needToScroll=e}))},isOverflow(){let e=l.$refs.outer,a=l.$refs.inner,t=s.getWidth(e);return s.getWidth(a)>t},getWidth(e){let{width:a}=e.getBoundingClientRect();return a},startCheck(){t._checkTimer=setInterval(s.check,1e3),s.check()},stopCheck(){clearInterval(t._checkTimer)}};return i((()=>{s.startCheck()})),n((()=>{s.stopCheck()})),{...o(t),...s}}}),Q={class:"scrollText",ref:"outer"},G={class:"st-section",ref:"inner"},Z={key:0,class:"st-section"};var ee=F(Y,[["render",function(e,a,r,i,n,o){return l(),t("div",Q,[s("div",{class:u(["st-inner",{"st-scrolling":e.needToScroll}])},[s("span",G,[d(e.$slots,"default",{},void 0,!0)],512),e.needToScroll?(l(),t("span",Z,[d(e.$slots,"default",{},void 0,!0)])):c("",!0)],2)],512)}],["__scopeId","data-v-25aae93a"]]);var ae=F(e({name:"playerMenu",props:{visible:{type:Boolean,default:!1},left:{type:Number,default:0},top:{type:Number,default:0},contextData:{type:Object,default:null},isEdit:{type:Boolean,default:!0}},components:{},emits:["updateNumber","delete","transfer","edit"],setup(e,a){N();const{proxy:l}=p();let t=r({timer:null,newTop:e.top,newLeft:e.left}),s={handleTransfer(){a.emit("transfer")},handleCopy(){L(e.contextData.value)},handleEditNumber(){let l={jerseynumber:e.contextData.lineupData.jerseynumber,id:e.contextData.value};a.emit("updateNumber",l)},handleEdit(){a.emit("edit",e.contextData.value)},handleCopyPlayerAttr(){q((()=>{let a=e.contextData.playerdata,t={};Object.keys(a).forEach((e=>{l.$config.playerAttribute.includes(e)&&(t[e]=parseInt(a[e]))})),l.$utils.cache.copyAttrData.set(JSON.stringify(t)),l.$message.success(l.$t("message.copySucceeded"))}))},handleCopyPlayerData(){q((()=>{l.$utils.cache.copyData.set(JSON.stringify(e.contextData.playerdata)),l.$message.success(l.$t("message.copySucceeded"))}))},handleDelete(){a.emit("delete",e.contextData.value)}};return i((()=>{let a=document.body.offsetHeight,l=document.body.offsetWidth,s=document.querySelector("#contextMenu");e.top+s.offsetHeight>a?t.newTop=a-s.offsetHeight:e.left+s.offsetWidth>l&&(t.newLeft=l-70-s.offsetWidth)})),{...o(t),...s}}}),[["render",function(e,a,r,i,n,o){const d=m("CopyDocument"),u=m("el-icon"),p=m("EditPen"),h=m("Position"),b=m("Edit"),D=m("Delete");return e.visible?(l(),t("ul",{key:0,id:"contextMenu",style:v({left:e.newLeft+"px",top:e.newTop+"px"}),class:"contextmenu"},[s("li",{class:"flex-between",onClick:a[0]||(a[0]=(...a)=>e.handleCopy&&e.handleCopy(...a))},[s("span",null,y(e.$t("message.copyid")),1),f(u,null,{default:g((()=>[f(d)])),_:1})]),s("li",{class:"flex-between",onClick:a[1]||(a[1]=(...a)=>e.handleCopyPlayerData&&e.handleCopyPlayerData(...a))},[s("span",null,y(e.$t("message.copyplayer")),1),f(u,null,{default:g((()=>[f(d)])),_:1})]),s("li",{class:"flex-between",onClick:a[2]||(a[2]=(...a)=>e.handleCopyPlayerAttr&&e.handleCopyPlayerAttr(...a))},[s("span",null,y(e.$t("message.copyAttr")),1),f(u,null,{default:g((()=>[f(d)])),_:1})]),e.isEdit?(l(),t("li",{key:0,class:"flex-between",onClick:a[3]||(a[3]=(...a)=>e.handleEditNumber&&e.handleEditNumber(...a))},[s("span",null,y(e.$t("message.editnumber")),1),f(u,null,{default:g((()=>[f(p)])),_:1})])):c("",!0),e.isEdit?(l(),t("li",{key:1,class:"flex-between",onClick:a[4]||(a[4]=(...a)=>e.handleTransfer&&e.handleTransfer(...a))},[s("span",null,y(e.$t("message.transfer")),1),f(u,null,{default:g((()=>[f(h)])),_:1})])):c("",!0),e.isEdit?(l(),t("li",{key:2,class:"flex-between",onClick:a[5]||(a[5]=(...a)=>e.handleEdit&&e.handleEdit(...a))},[s("span",null,y(e.$t("message.editplayer")),1),f(u,null,{default:g((()=>[f(b)])),_:1})])):c("",!0),s("li",{class:"flex-between",onClick:a[6]||(a[6]=(...a)=>e.handleDelete&&e.handleDelete(...a))},[s("span",null,y(e.$t("message.deleteplayer")),1),f(u,null,{default:g((()=>[f(D)])),_:1})])],4)):c("",!0)}],["__scopeId","data-v-e0bc0ad4"]]);const le=e({name:"playerSelector",components:{},props:{modelValue:{type:String,default:""},filterable:{type:Boolean,default:!0},remote:{type:Boolean,default:!0},multiple:{type:Boolean,default:!1},clearable:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1}},emits:["update:modelValue","change"],setup(e,a){const l=N();j();let t=r({selectOptions:[],valueName:"",selectLoading:!1,cloneSelectOptions:[]}),s={remoteMethod(e){if(""!==e){let l;t.selectLoading=!0,l&&clearTimeout(l),l=setTimeout((()=>{t.selectLoading=!1,!isNaN(parseFloat(e))&&isFinite(e)&&(t.selectOptions=t.cloneSelectOptions.filter((a=>a.label==e)))}),500),a.emit("update:modelValue",t.valueName)}else t.selectOptions=[]},handleChange(e){a.emit("update:modelValue",e),a.emit("change",e)}};return h((()=>e.modelValue),(a=>{t.valueName=e.modelValue})),i((()=>{t.cloneSelectOptions=l.getAllPlayerList(),t.valueName=e.modelValue})),{...o(t),...s,...j()}}}),te={style:{"margin-right":"8px"}},se={style:{color:"var(--el-text-color-secondary)","font-size":"13px"}};var re=F(le,[["render",function(e,a,t,r,i,n){const o=m("el-select-v2");return l(),b(o,{modelValue:e.valueName,"onUpdate:modelValue":a[0]||(a[0]=a=>e.valueName=a),filterable:e.filterable,remote:e.remote,multiple:e.multiple,clearable:e.clearable,disabled:e.disabled,options:e.selectOptions,placeholder:e.$t("message.selectPlayerPlaceholder"),onChange:e.handleChange,"remote-method":e.remoteMethod,"value-key":"value.playerid",loading:e.selectLoading},{default:g((({item:a})=>[s("span",te,y(a.label),1),s("span",se,y(e.getPlayerName(a.value.firstnameid,a.value.lastnameid,a.value.commonnameid)),1)])),_:1},8,["modelValue","filterable","remote","multiple","clearable","disabled","options","placeholder","onChange","remote-method","loading"])}]]);const ie=e({name:"TransferDialog",components:{teamSelector:O,playerMenu:ae,Marquees:ee,playerSelector:re},props:{visible:{type:Boolean,default:!1}},emits:["close","save"],setup(e,a){const{proxy:l}=p(),t=N(),s=E(),d=j();let c=r({dialogVisible:e.visible,selectTeamData:"",selectPlayerData:"",lineupData:[],pendingTransferData:[],activeData:[],menuVisible:!1,contextData:null,left:0,top:0,loading:!1,filterOptions:[{label:"teams",value:"1"},{label:"players",value:"2"}],filterType:""}),u={handleDelete(e){c.pendingTransferData.forEach(((a,l)=>{a.value==e&&c.pendingTransferData.splice(l,1)}))},handleClose(){c.dialogVisible=!1,a.emit("close")},handleConfirm(){a.emit("save",c.pendingTransferData)},handleLoadLineup1(){if(c.selectTeamData==l.$route.query.teamid)return c.loading=!1,l.$message.warning(l.$t("message.transferError1"));c.activeData.length=0,c.lineupData.length=0,t.data.teamplayerlinks?(t.data.teamplayerlinks.forEach((e=>{if(e.teamid==c.selectTeamData){let a=t.data.players.find((a=>a.playerid==e.playerid));if(a){let l=d.getPlayerName.value(a.firstnameid,a.lastnameid,a.commonnameid);c.lineupData.push({label:l,value:e.playerid,playerdata:a,lineupData:e})}}})),c.loading=!1):l.$message.warning(`${l.$t("message.notfound")}`)},handleLoadLineup2(){c.activeData.length=0,c.lineupData.length=0,t.data.teamplayerlinks?(t.data.teamplayerlinks.forEach((e=>{if(e.playerid==c.selectPlayerData){let a=t.data.players.find((a=>a.playerid==e.playerid));if(a){let l=d.getPlayerName.value(a.firstnameid,a.lastnameid,a.commonnameid);c.lineupData.push({label:l,value:e.playerid,playerdata:a,lineupData:e})}}})),c.loading=!1):l.$message.warning(`${l.$t("message.notfound")}`)},handleClick(e){for(let a=0;a<c.activeData.length;a++)if(c.activeData[a].value==e.value&&c.activeData[a].lineupData.teamid==e.lineupData.teamid)return void c.activeData.splice(a,1);c.activeData.push(e)},handleToRight(){for(let a=0;a<c.activeData.length;a++)if(c.activeData[a].lineupData.teamid==l.$route.query.teamid)return l.$message.warning(l.$t("message.transferError2"));let e=new Set([...c.pendingTransferData,...c.activeData]);c.pendingTransferData=Array.from(e),c.activeData=[]},handleMenu(e,a,l=null){c.menuVisible=!1,setTimeout((()=>{c[a]=!0,c.left=e.pageX,c.top=e.pageY,c.contextData=l}),100)},closeMenu(){c.menuVisible=!1},handleTeamChange(){""!==c.selectTeamData&&(c.loading=!0,setTimeout((()=>{u.handleLoadLineup1()}),200))},handlePlayerChange(){""!==c.selectPlayerData&&(c.loading=!0,setTimeout((()=>{u.handleLoadLineup2()}),200))}};return i((()=>{document.addEventListener("click",u.closeMenu)})),n((()=>{document.removeEventListener("click",u.closeMenu)})),{...o(c),...u,...s,...d,ArrowRightBold:X,ArrowLeftBold:D}}}),ne={class:"flex-start",style:{"margin-bottom":"10px"}},oe={class:"flex-center"},de={class:"scrollAuto scrollbar lineup-box flex-start flex-warp"},ce=["onClick","title"],ue={class:"flex-start full-w"},pe={class:"player-ability"},me={class:"player-position"},ye={class:"flex-center"},fe={class:"flex-column-center"},ge=["src"],ve=["src"],he={class:"player-avatar"},be={class:"image-slot"},De=["src"],xe={class:"image-slot"},we=["src"],Ce={class:"player-name-1"},Pe={class:"flex-column-center",style:{width:"100px"}},ke={class:"scrollAuto scrollbar lineup-box flex-start flex-warp"},Se=["onContextmenu","title"],Te={class:"flex-start full-w"},$e={class:"player-ability"},Ve={class:"player-position"},_e={class:"flex-center"},Ne={class:"flex-column-center"},Oe=["src"],Ee=["src"],je={class:"player-avatar"},Fe={class:"image-slot"},Le=["src"],qe={class:"image-slot"},Me=["src"],Ae={class:"player-name-1"},Be={class:"dialog-footer"};var Je=F(ie,[["render",function(e,a,r,i,n,o){const d=m("el-option"),p=m("el-select"),v=m("teamSelector"),h=m("playerSelector"),D=m("el-avatar"),$=m("el-tooltip"),V=m("el-image"),_=m("Marquees"),N=m("el-button"),O=m("el-dialog"),E=m("playerMenu"),j=x("loading");return l(),t(C,null,[f(O,{modelValue:e.dialogVisible,"onUpdate:modelValue":a[4]||(a[4]=a=>e.dialogVisible=a),title:e.$t("message.transfer"),"before-close":e.handleClose,top:"5vh","custom-class":"z-dialog",center:"",width:"80%"},{footer:g((()=>[s("span",Be,[f(N,{onClick:e.handleClose},{default:g((()=>[w(y(e.$t("message.cancel")),1)])),_:1},8,["onClick"]),f(N,{type:"primary",onClick:e.handleConfirm},{default:g((()=>[w(y(e.$t("message.confirm")),1)])),_:1},8,["onClick"])])])),default:g((()=>[s("div",null,[s("div",ne,[f(p,{modelValue:e.filterType,"onUpdate:modelValue":a[0]||(a[0]=a=>e.filterType=a),placeholder:e.$t("message.filter"),clearable:"",onChange:a[1]||(a[1]=a=>{e.selectTeamData="",e.selectPlayerData=""}),style:{width:"200px","margin-right":"10px"}},{default:g((()=>[(l(!0),t(C,null,P(e.filterOptions,(a=>(l(),b(d,{key:a.value,label:e.$t(`message.${a.label}`),value:a.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue","placeholder"]),k(f(v,{modelValue:e.selectTeamData,"onUpdate:modelValue":a[2]||(a[2]=a=>e.selectTeamData=a),onChange:e.handleTeamChange},null,8,["modelValue","onChange"]),[[S,"1"===e.filterType]]),k(f(h,{modelValue:e.selectPlayerData,"onUpdate:modelValue":a[3]||(a[3]=a=>e.selectPlayerData=a),onChange:e.handlePlayerChange},null,8,["modelValue","onChange"]),[[S,"2"===e.filterType]])]),s("div",oe,[k((l(),t("div",de,[(l(!0),t(C,null,P(e.lineupData,(a=>(l(),t("div",{class:u(["player-card flex-column-center",{"player-card-active":e.activeData.length&&e.activeData.find((e=>e.value==a.value&&e.lineupData.teamid==a.lineupData.teamid))}]),onClick:l=>e.handleClick(a),title:a.label+"("+a.value+")",key:a.value},[s("div",ue,[s("span",pe,y(a.playerdata.overallrating),1),s("div",me,y(e.getPlayerPositionByCode(a.playerdata.preferredposition1)),1)]),s("div",ye,[s("div",fe,[f($,{effect:"dark",content:e.getTeamName(a.lineupData.teamid),placement:"top"},{default:g((()=>[f(D,{shape:"square",size:24,fit:"cover",src:e.getTeamAvatar(a.lineupData.teamid,60),onError:e=>!0},{default:g((()=>[s("img",{src:A||B},null,8,ge)])),_:2},1032,["src"])])),_:2},1032,["content"]),f(D,{shape:"square",size:24,style:{width:"24px",height:"16px"},fit:"cover",src:e.getPlayerNationFlag(a.playerdata.nationality),onError:e=>!0},{default:g((()=>[s("img",{src:J||z},null,8,ve)])),_:2},1032,["src"])]),s("div",he,[f(V,{style:{height:"100%",width:"100%"},lazy:"",src:e.getPlayerAvatar(a.playerdata.playerid,60),fit:"cover"},{placeholder:g((()=>[s("div",be,[s("img",{src:I||U,style:{"object-fit":"cover"}},null,8,De)])])),error:g((()=>[s("div",xe,[s("img",{src:I||U,style:{"object-fit":"cover"}},null,8,we)])])),_:2},1032,["src"])])]),s("div",Ce,[f(_,null,{default:g((()=>[w(y(a.label),1)])),_:2},1024)])],10,ce)))),128))])),[[j,e.loading]]),s("div",Pe,[f(N,{type:"primary",icon:e.ArrowRightBold,onClick:e.handleToRight},null,8,["icon","onClick"])]),s("div",ke,[(l(!0),t(C,null,P(e.pendingTransferData,(a=>(l(),t("div",{class:"player-card flex-column-center",onContextmenu:T((l=>e.handleMenu(l,"menuVisible",a)),["prevent"]),title:a.label+"("+a.value+")",key:a.value},[s("div",Te,[s("span",$e,y(a.playerdata.overallrating),1),s("div",Ve,y(e.getPlayerPositionByCode(a.playerdata.preferredposition1)),1)]),s("div",_e,[s("div",Ne,[f($,{effect:"dark",content:e.getTeamName(a.lineupData.teamid),placement:"top"},{default:g((()=>[f(D,{shape:"square",size:24,fit:"cover",src:e.getTeamAvatar(a.lineupData.teamid,60),onError:e=>!0},{default:g((()=>[s("img",{src:A||B},null,8,Oe)])),_:2},1032,["src"])])),_:2},1032,["content"]),f(D,{shape:"square",size:24,style:{width:"24px",height:"16px"},fit:"cover",src:e.getPlayerNationFlag(a.playerdata.nationality),onError:e=>!0},{default:g((()=>[s("img",{src:J||z},null,8,Ee)])),_:2},1032,["src"])]),s("div",je,[f(V,{style:{height:"100%",width:"100%"},lazy:"",src:e.getPlayerAvatar(a.playerdata.playerid,60),fit:"cover"},{placeholder:g((()=>[s("div",Fe,[s("img",{src:I||U,style:{"object-fit":"cover"}},null,8,Le)])])),error:g((()=>[s("div",qe,[s("img",{src:I||U,style:{"object-fit":"cover"}},null,8,Me)])])),_:2},1032,["src"])])]),s("div",Ae,[f(_,null,{default:g((()=>[w(y(a.label),1)])),_:2},1024)])],40,Se)))),128))])])])])),_:1},8,["modelValue","title","before-close"]),e.menuVisible?(l(),b(E,{key:0,visible:e.menuVisible,left:e.left,top:e.top,isEdit:!1,onDelete:e.handleDelete,contextData:e.contextData},null,8,["visible","left","top","onDelete","contextData"])):c("",!0)],64)}],["__scopeId","data-v-3f78b0a5"]]);const ze=e({name:"SaveState",components:{},props:{state:{type:Object,default:function(){return{text:"saving",status:"loading"}}}},setup(e,a){let l=r({});return{...o(l)}}}),Ie={class:"save-box flex-center"};var Ue=F(ze,[["render",function(e,a,r,i,n,o){const d=m("Loading"),u=m("el-icon"),p=m("CircleCheck"),v=m("CircleClose");return l(),t("div",Ie,[s("p",null,y(e.$t(`message.${e.state.text}`)),1),"loading"===e.state.status?(l(),b(u,{key:0,class:"is-loading"},{default:g((()=>[f(d)])),_:1})):"success"===e.state.status?(l(),b(u,{key:1},{default:g((()=>[f(p)])),_:1})):"error"===e.state.status?(l(),b(u,{key:2},{default:g((()=>[f(v)])),_:1})):c("",!0)])}],["__scopeId","data-v-ad6064ea"]]);const Re=e({name:"TransferFreeDialog",components:{playerSelector:re},props:{visible:{type:Boolean,default:!1},row:{type:Object,default:null}},emits:["close","save"],setup(e,a){const{proxy:l}=p(),t=N(),s=j();let n=r({dialogVisible:e.visible,selectPlayerData:{jerseynumber:"",position:"29",teamid:"",playerid:""},playerdata:{}}),d={handleClose(){n.dialogVisible=!1,a.emit("close")},async handleConfirm(){if(""==n.selectPlayerData.playerid||""==n.selectPlayerData.jerseynumber)return;n.selectPlayerData.teamid=l.$route.query.teamid;let e=[{label:s.getPlayerName.value(n.playerdata.firstnameid,n.playerdata.lastnameid,n.playerdata.commonnameid),value:n.playerdata.playerid,playerdata:n.playerdata,lineupData:{...n.selectPlayerData}}];a.emit("save",e)}};return $((()=>{""!=n.selectPlayerData.playerid&&(n.playerdata=t.data.players.find((e=>e.playerid==n.selectPlayerData.playerid)))})),i((()=>{})),{...o(n),...d,...j(),...E()}}}),He={class:"flex-column-center"},We={class:"flex-center"},Ke={style:{"padding-right":"20px"}},Xe={class:"flex-center",style:{"margin-top":"20px"}},Ye={style:{"padding-right":"8px"}},Qe={key:0,class:"transfer-player-box"},Ge={class:"player-team"},Ze={class:"image-slot"},ea=["src"],aa={class:"image-slot"},la=["src"],ta={class:"player-avatar"},sa={class:"image-slot"},ra=["src"],ia={class:"image-slot"},na=["src"],oa={class:"dialog-footer"};var da=F(Re,[["render",function(e,a,r,i,n,o){const d=m("playerSelector"),u=m("el-input"),p=m("el-image"),v=m("el-button"),h=m("el-dialog");return l(),b(h,{modelValue:e.dialogVisible,"onUpdate:modelValue":a[2]||(a[2]=a=>e.dialogVisible=a),title:e.$t("message.transferIn"),"before-close":e.handleClose,"custom-class":"z-dialog",center:"",width:500},{footer:g((()=>[s("span",oa,[f(v,{onClick:e.handleClose},{default:g((()=>[w(y(e.$t("message.cancel")),1)])),_:1},8,["onClick"]),f(v,{type:"primary",onClick:e.handleConfirm},{default:g((()=>[w(y(e.$t("message.confirm")),1)])),_:1},8,["onClick"])])])),default:g((()=>[s("div",He,[s("div",We,[s("span",Ke,y(e.$t("message.playerids")),1),f(d,{modelValue:e.selectPlayerData.playerid,"onUpdate:modelValue":a[0]||(a[0]=a=>e.selectPlayerData.playerid=a),style:{width:"200px"}},null,8,["modelValue"])]),s("div",Xe,[s("span",Ye,y(e.$t("message.kitNumber")),1),f(u,{modelValue:e.selectPlayerData.jerseynumber,"onUpdate:modelValue":a[1]||(a[1]=a=>e.selectPlayerData.jerseynumber=a),style:{width:"200px"},placeholder:e.$t("message.editNumber")},null,8,["modelValue","placeholder"])]),e.playerdata.playerid?(l(),t("div",Qe,[s("div",Ge,[f(p,{style:{height:"100%",width:"100%"},lazy:"",src:e.getTeamAvatar(e.$route.query.teamid,120),fit:"cover"},{placeholder:g((()=>[s("div",Ze,[s("img",{src:A||B,style:{"object-fit":"cover"}},null,8,ea)])])),error:g((()=>[s("div",aa,[s("img",{src:A||B,style:{"object-fit":"cover"}},null,8,la)])])),_:1},8,["src"])]),s("div",ta,[f(p,{style:{height:"100%",width:"100%"},lazy:"",src:e.getPlayerAvatar(e.playerdata.playerid,120),fit:"cover"},{placeholder:g((()=>[s("div",sa,[s("img",{src:I||U,style:{"object-fit":"cover"}},null,8,ra)])])),error:g((()=>[s("div",ia,[s("img",{src:I||U,style:{"object-fit":"cover"}},null,8,na)])])),_:1},8,["src"])]),s("p",null,y(e.getPlayerName(e.playerdata.firstnameid,e.playerdata.lastnameid,e.playerdata.commonnameid)),1)])):c("",!0)])])),_:1},8,["modelValue","title","before-close"])}],["__scopeId","data-v-5a012f83"]]);const ca=e({name:"TransferOutDialog",components:{teamSelector:O},props:{visible:{type:Boolean,default:!1},row:{type:Object,default:null}},emits:["close","save"],setup(e,a){const{proxy:l}=p(),t=N();j();let s=r({dialogVisible:e.visible,selectPlayerData:{jerseynumber:"",position:"29",teamid:"",playerid:""},playerdata:{}}),n={handleClose(){s.dialogVisible=!1,a.emit("close")},async handleConfirm(){if(s.selectPlayerData.teamid==l.$route.query.teamid)return n.handleClose();""!=s.selectPlayerData.teamid&&""!=s.selectPlayerData.jerseynumber&&a.emit("save",s.selectPlayerData)}};return $((()=>{""!=s.selectPlayerData.playerid&&(s.playerdata=t.data.players.find((e=>e.playerid==s.selectPlayerData.playerid)))})),i((()=>{s.selectPlayerData.playerid=e.row.value,s.selectPlayerData.teamid=l.$route.query.teamid})),{...o(s),...n,...j(),...E()}}}),ua={class:"flex-column-center"},pa={class:"flex-center"},ma={style:{"padding-right":"20px"}},ya={class:"flex-center",style:{"margin-top":"20px"}},fa={style:{"padding-right":"8px"}},ga={key:0,class:"transfer-player-box"},va={class:"player-team"},ha={class:"image-slot"},ba=["src"],Da={class:"image-slot"},xa=["src"],wa={class:"player-avatar"},Ca={class:"image-slot"},Pa=["src"],ka={class:"image-slot"},Sa=["src"],Ta={class:"dialog-footer"};const $a=e({name:"TeamLineupEdit",components:{Marquees:ee,playerMenu:ae,PlayerEdit:R,TransferDialog:Je,SaveState:Ue,TransferFreeDialog:da,TransferOutDialog:F(ca,[["render",function(e,a,r,i,n,o){const d=m("teamSelector"),u=m("el-input"),p=m("el-image"),v=m("el-button"),h=m("el-dialog");return l(),b(h,{modelValue:e.dialogVisible,"onUpdate:modelValue":a[2]||(a[2]=a=>e.dialogVisible=a),title:e.$t("message.transferOut"),"before-close":e.handleClose,"custom-class":"z-dialog",center:"",width:500},{footer:g((()=>[s("span",Ta,[f(v,{onClick:e.handleClose},{default:g((()=>[w(y(e.$t("message.cancel")),1)])),_:1},8,["onClick"]),f(v,{type:"primary",onClick:e.handleConfirm},{default:g((()=>[w(y(e.$t("message.confirm")),1)])),_:1},8,["onClick"])])])),default:g((()=>[s("div",ua,[s("div",pa,[s("span",ma,y(e.$t("message.teamid")),1),f(d,{modelValue:e.selectPlayerData.teamid,"onUpdate:modelValue":a[0]||(a[0]=a=>e.selectPlayerData.teamid=a)},null,8,["modelValue"])]),s("div",ya,[s("span",fa,y(e.$t("message.kitNumber")),1),f(u,{modelValue:e.selectPlayerData.jerseynumber,"onUpdate:modelValue":a[1]||(a[1]=a=>e.selectPlayerData.jerseynumber=a),style:{width:"200px"},placeholder:e.$t("message.editNumber")},null,8,["modelValue","placeholder"])]),e.playerdata.playerid?(l(),t("div",ga,[s("div",va,[f(p,{style:{height:"100%",width:"100%"},lazy:"",src:e.getTeamAvatar(e.selectPlayerData.teamid,120),fit:"cover"},{placeholder:g((()=>[s("div",ha,[s("img",{src:A||B,style:{"object-fit":"cover"}},null,8,ba)])])),error:g((()=>[s("div",Da,[s("img",{src:A||B,style:{"object-fit":"cover"}},null,8,xa)])])),_:1},8,["src"])]),s("div",wa,[f(p,{style:{height:"100%",width:"100%"},lazy:"",src:e.getPlayerAvatar(e.playerdata.playerid,120),fit:"cover"},{placeholder:g((()=>[s("div",Ca,[s("img",{src:I||U,style:{"object-fit":"cover"}},null,8,Pa)])])),error:g((()=>[s("div",ka,[s("img",{src:I||U,style:{"object-fit":"cover"}},null,8,Sa)])])),_:1},8,["src"])]),s("p",null,y(e.getPlayerName(e.playerdata.firstnameid,e.playerdata.lastnameid,e.playerdata.commonnameid)),1)])):c("",!0)])])),_:1},8,["modelValue","title","before-close"])}],["__scopeId","data-v-74238acb"]])},props:{},setup(e,a){const l=N(),{proxy:t}=p(),s=E(),d=j();let c=r({lineupData:[],isNotFound:!1,isSwap:!1,transferPlayer:!1,addPlayer:!1,currentTeamFormation:{},selectOptions:[],cloneSelectOptions:[],startingLineups:[],teamFormationData:{},swapData:[],menuVisible:!1,left:0,top:0,contextData:null,savingState:{text:"saving",status:"loading"},autoSaveVisible:!1,timer:null,count:0,saveloading:!1,transferOutVisible:!1,isShowEditPlayer:!1,currentEditPlayerId:0}),u=V((()=>c.lineupData.filter((e=>!e.lineupData.isLeave)).slice(0,11))),m=V((()=>11===u.value.length?c.lineupData.filter((e=>!e.lineupData.isLeave)).slice(11,18):[])),y=V((()=>m.value.length>=7?c.lineupData.filter((e=>!e.lineupData.isLeave)).slice(18):[])),f={handleTransferOut(e){c.lineupData.forEach((a=>{a.value==e.playerid&&(a.lineupData.teamid=e.teamid,a.lineupData.jerseynumber=e.jerseynumber,a.lineupData.position=e.position,a.lineupData.isLeave=!0)}));let a=c.swapData.findIndex((a=>a.value==e.playerid));a>=0&&c.swapData.splice(a,1),c.transferOutVisible=!1,f.updateFormationModel()},handleUpdateNumber(e){c.menuVisible=!1,_.prompt(t.$t("message.editNumber"),t.$t("message.edit"),{confirmButtonText:t.$t("message.confirm"),cancelButtonText:t.$t("message.cancel"),inputPattern:/^[0-9]*$/,inputValue:e.jerseynumber,inputErrorMessage:t.$t("message.inputError")}).then((({value:a})=>{c.lineupData.forEach((l=>{l.value==e.id&&(l.lineupData.jerseynumber=a)}))})).catch((e=>{}))},handleDelete(e){_.confirm(t.$t("message.isReleaseContract"),t.$t("message.warning"),{confirmButtonText:t.$t("message.confirm"),cancelButtonText:t.$t("message.cancel"),type:"warning"}).then((()=>{let a=c.lineupData.findIndex((a=>a.value==e));a>=0&&c.lineupData.splice(a,1);let l=c.swapData.findIndex((a=>a.value==e));l>=0&&c.swapData.splice(l,1),f.updateFormationModel()})).catch((()=>{})),c.menuVisible=!1},closeMenu(){c.menuVisible=!1},handleMenu(e,a,l=null){f.closeMenu(),setTimeout((()=>{c[a]=!0,c.left=e.pageX,c.top=e.pageY,c.contextData=l}),100)},getTeamPlayerLineup(){const e=t.$route.query.teamid;if(!l.data.teamplayerlinks)return void(c.isNotFound=!0);let a=l.data.teamplayerlinks.map((a=>{let t=null,s=null;a.teamid==e&&(t=l.data.players.find((e=>e.playerid==a.playerid)),s=a);let r=t?d.getPlayerName.value(t.firstnameid,t.lastnameid,t.commonnameid):"";return t?{label:r,value:a.playerid,playerdata:t,lineupData:s}:null}));c.lineupData=JSON.parse(JSON.stringify(a.filter(Boolean))),c.lineupData.length?f.updateFormationModel():c.isNotFound=!0},handleSave:()=>new Promise(((e,a)=>{c.lineupData.length&&(c.timer&&clearTimeout(c.timer),c.saveloading=!0,c.autoSaveVisible=!0,c.timer=setTimeout((()=>{let a=[];JSON.parse(JSON.stringify(M(c.lineupData))).forEach((e=>{a.push(e.lineupData)}));let r=JSON.parse(JSON.stringify(s.getTeamRelativeFormation.value(c.currentTeamFormation.formationid)));r.teamid=t.$route.query.teamid,c.teamFormationData.teamid?r.formationid=c.teamFormationData.formationid:r.formationid=l.data.formations.length+1;l.saveLineupData("teamplayerlinks",a,t.$route.query.teamid,r)?(c.savingState={text:"saveSucceeded",status:"success"},c.lineupData.forEach(((e,a)=>{e.lineupData.isLeave?c.lineupData.splice(a,1):e.lineupData.teamid=t.$route.query.teamid})),e(!0)):c.savingState={text:"saveFailed",status:"error"},c.saveloading=!1,setTimeout((()=>{c.autoSaveVisible=!1,c.savingState={text:"saving",status:"loading"}}),1500)}),500))})),handleChange(e){c.currentTeamFormation=JSON.parse(JSON.stringify(s.getTeamFormationById.value(e))),f.updateFormationModel()},updateFormationModel(){if("{}"===JSON.stringify(c.currentTeamFormation))return;let e=M(u.value),a=JSON.parse(JSON.stringify(s.getTeamRelativeFormation.value(c.currentTeamFormation.formationid)));e.forEach(((e,l)=>{e.lineupData.position=a[`position${l}`]})),c.startingLineups=e.map(((e,a)=>{let l=Number(e.lineupData.position);return{offsetX:t.$config.formationPos[l].x,offsetY:t.$config.formationPos[l].y,...e}}))},handleClick(e){for(let a=0;a<c.swapData.length;a++)if(c.swapData[a].value==e.value)return void c.swapData.splice(a,1);c.swapData.length>=2||c.swapData.push(e)},handleSwap(){if(!c.swapData.length)return;let e=c.swapData[0].lineupData.position;c.swapData[0].lineupData.position=c.swapData[1].lineupData.position,c.swapData[1].lineupData.position=e;let a=c.lineupData.findIndex((e=>e.value==c.swapData[0].value)),l=c.lineupData.findIndex((e=>e.value==c.swapData[1].value)),t=JSON.parse(JSON.stringify(c.lineupData));t[a]=t.splice(l,1,t[a])[0],c.lineupData=t,c.swapData.length=0,f.updateFormationModel()},handleTransfer(e){if(!e.length)return;e.forEach((e=>{e.lineupData.position="29"})),c.transferPlayer=!1,c.addPlayer=!1;let a=f.handleRemoveRepeat(e);c.lineupData.push(...a),c.lineupData.length>=11&&f.updateFormationModel()},handleRemoveRepeat(e){let a=[];return e.forEach((e=>{c.lineupData.find((a=>a.value==e.value))||a.push(e)})),a},handleKeyDown(e){let a=e||window.event||arguments.callee.caller.arguments[0];(a&&13==a.keyCode||"Enter"==a.key)&&f.handleSwap()},handleEditPlayer(e){c.currentEditPlayerId=e,c.isShowEditPlayer=!0},handleCloseEdit(){c.isShowEditPlayer=!1,c.currentEditPlayerId=0},async handleSaveEdit(){await f.handleSave()&&f.getTeamPlayerLineup()},handleHide(){l.addHideList({sourceName:t.$route.name,sourceKey:"teamid",sourceID:t.$route.query.teamid,sourceType:s.getTeamAvatar.value(t.$route.query.teamid),sourceLabel:s.getTeamName.value(t.$route.query.teamid)}),t.$message.success(t.$t("message.hideSucceeded"))}};return i((()=>{c.currentTeamFormation=JSON.parse(JSON.stringify(s.getTeamFormation.value(t.$route.query.teamid,0))),c.teamFormationData=JSON.parse(JSON.stringify(s.getTeamFormation.value(t.$route.query.teamid,1))),c.selectOptions=l.getAllFormationList(),c.cloneSelectOptions=JSON.parse(JSON.stringify(c.selectOptions)),f.getTeamPlayerLineup(),document.addEventListener("keydown",f.handleKeyDown),document.addEventListener("click",f.closeMenu)})),n((()=>{document.removeEventListener("keydown",f.handleKeyDown,!1),document.removeEventListener("click",f.closeMenu),c.timer&&clearTimeout(c.timer)})),$((()=>{c.lineupData.length&&(c.isNotFound=!1)})),h((()=>t.$route.query.teamid),(e=>{e&&0!=e&&(c.currentTeamFormation=JSON.parse(JSON.stringify(s.getTeamFormation.value(t.$route.query.teamid,0))),c.teamFormationData=JSON.parse(JSON.stringify(s.getTeamFormation.value(t.$route.query.teamid,1))),c.selectOptions=l.getAllFormationList(),c.cloneSelectOptions=JSON.parse(JSON.stringify(c.selectOptions)),f.getTeamPlayerLineup())})),{...o(c),...f,editSpaceStore:l,...s,...d,getStarting11Players:u,getSubPlayers:m,getResPlayers:y}}}),Va={class:"full-layout flex-column-center scrollbar routerview",style:{"overflow-y":"hidden"}},_a={class:"flex-between full-w edit-header"},Na={class:"flex-end",style:{"margin-left":"10px"}},Oa={class:"player-box full-layout flex-center flex-nowarp"},Ea={class:"player-box full-layout scrollbar scrollAuto",style:{flex:"1",height:"calc(100vh - 115px)","min-width":"450px"}},ja={class:"flex-between flex-warp"},Fa={class:"flex-start",style:{"align-items":"flex-end"}},La={class:"team-avatar"},qa={class:"image-slot"},Ma=["src"],Aa={class:"image-slot"},Ba=["src"],Ja={class:"flex-column-end player-info"},za={class:"player-name text-left"},Ia={class:"flex-start"},Ua=["src"],Ra={class:"player-formation"},Ha={style:{"margin-left":"10px"}},Wa={class:"flex-end select-box"},Ka={key:0,class:"flex-start flex-warp",style:{"margin-top":"20px","justify-content":"flex-start","align-items":"flex-start"}},Xa={class:"field-large margin-1"},Ya=["src"],Qa=["title","onClick","onContextmenu"],Ga={class:"flex-start full-w"},Za={class:"player-ability"},el={class:"player-position"},al={class:"flex-center"},ll={class:"flex-column-center"},tl=["src"],sl={class:"player-number"},rl={class:"player-avatar"},il={class:"image-slot"},nl=["src"],ol={class:"image-slot"},dl=["src"],cl={class:"player-name-1"},ul={style:{flex:"1"}},pl={class:"tab-1"},ml={class:"flex-start flex-warp lineup-box starting11-box full-w margin-1 scrollAuto scrollbar"},yl=["title","onClick","onContextmenu"],fl={class:"flex-start full-w"},gl={class:"player-ability"},vl={class:"player-position"},hl={class:"flex-center"},bl={class:"flex-column-center"},Dl=["src"],xl={class:"player-number"},wl={class:"player-avatar"},Cl={class:"image-slot"},Pl=["src"],kl={class:"image-slot"},Sl=["src"],Tl={class:"player-name-1"},$l={class:"full-w"},Vl={class:"tab-1"},_l={class:"flex-start flex-warp lineup-box sub-box full-w margin-1"},Nl=["onClick","onContextmenu","title"],Ol={class:"flex-start full-w"},El={class:"player-ability"},jl={class:"player-position"},Fl={class:"flex-center"},Ll={class:"flex-column-center"},ql=["src"],Ml={class:"player-number"},Al={class:"player-avatar"},Bl={class:"image-slot"},Jl=["src"],zl={class:"image-slot"},Il=["src"],Ul={class:"player-name-1"},Rl={class:"full-w"},Hl={class:"tab-1"},Wl={class:"flex-start flex-warp lineup-box res-box full-w margin-1"},Kl=["onClick","title","onContextmenu"],Xl={class:"flex-start full-w"},Yl={class:"player-ability"},Ql={class:"player-position"},Gl={class:"flex-center"},Zl={class:"flex-column-center"},et=["src"],at={class:"player-number"},lt={class:"player-avatar"},tt={class:"image-slot"},st=["src"],rt={class:"image-slot"},it=["src"],nt={class:"player-name-1"},ot={key:0,style:{flex:"1",height:"calc(100vh - 115px)"},class:"border-box"};var dt=F($a,[["render",function(e,a,r,i,n,o){const d=m("ArrowLeftBold"),p=m("el-icon"),h=m("el-button"),D=m("el-skeleton"),x=m("el-empty"),k=m("el-image"),S=m("el-avatar"),$=m("el-select-v2"),V=m("Marquees"),_=m("PlayerEdit"),N=m("playerMenu"),O=m("TransferDialog"),E=m("TransferFreeDialog"),j=m("TransferOutDialog"),F=m("SaveState");return l(),t("div",Va,[e.editSpaceStore.isUpload?(l(),t(C,{key:0},[s("div",_a,[f(p,{class:"back-icon",onClick:a[0]||(a[0]=a=>e.$router.go(-1))},{default:g((()=>[f(d)])),_:1}),s("div",Na,[f(h,{type:"info",onClick:e.handleHide},{default:g((()=>[w(y(e.$t("message.hide")),1)])),_:1},8,["onClick"]),2===e.swapData.length?(l(),b(h,{key:0,type:"primary",onClick:e.handleSwap},{default:g((()=>[w(y(e.$t("message.swap")),1)])),_:1},8,["onClick"])):c("",!0),f(h,{type:"warning",onClick:a[1]||(a[1]=a=>e.transferPlayer=!0)},{default:g((()=>[w(y(e.$t("message.transfer")),1)])),_:1}),f(h,{type:"danger",onClick:a[2]||(a[2]=a=>e.addPlayer=!0)},{default:g((()=>[w(y(e.$t("message.addPlayer")),1)])),_:1}),f(h,{type:"success",onClick:e.handleSave,loading:e.saveloading},{default:g((()=>[w(y(e.$t("message.save")),1)])),_:1},8,["onClick","loading"])])]),s("div",Oa,[s("div",Ea,[e.lineupData.length||e.isNotFound?!e.lineupData.length&&e.isNotFound?(l(),b(x,{key:1,description:e.$t("message.notfound")},null,8,["description"])):(l(),t(C,{key:2},[s("div",ja,[s("div",Fa,[s("div",La,[f(k,{style:{height:"100%",width:"100%"},lazy:"",src:e.getTeamAvatar(e.$route.query.teamid,120),fit:"cover"},{placeholder:g((()=>[s("div",qa,[s("img",{src:A||B,style:{"object-fit":"cover"}},null,8,Ma)])])),error:g((()=>[s("div",Aa,[s("img",{src:A||B,style:{"object-fit":"cover"}},null,8,Ba)])])),_:1},8,["src"])]),s("div",Ja,[s("p",za,y(e.getTeamName(e.$route.query.teamid)),1),s("div",Ia,[f(S,{shape:"square",size:24,style:{width:"24px",height:"16px"},fit:"cover",src:e.getTeamNationFlag(e.$route.query.teamid),onError:e=>!0},{default:g((()=>[s("img",{src:J||z},null,8,Ua)])),_:1},8,["src"]),s("span",Ra,y(e.getTeamLeagueName(e.$route.query.teamid)),1),s("span",Ha,"(球员人数) "+y(e.lineupData.length)+"人",1)])])]),s("div",Wa,[f($,{modelValue:e.currentTeamFormation.formationid,"onUpdate:modelValue":a[3]||(a[3]=a=>e.currentTeamFormation.formationid=a),filterable:"",options:e.selectOptions,onVisibleChange:a[4]||(a[4]=a=>e.selectOptions=e.cloneSelectOptions),onChange:e.handleChange,"value-key":"value.formationid",placeholder:e.$t("message.selectPlaceholder")},null,8,["modelValue","options","onChange","placeholder"])])]),e.lineupData&&e.lineupData.length>0?(l(),t("div",Ka,[s("div",Xa,[s("img",{src:"/static/png/field-4e1fdc65.png"},null,8,Ya),(l(!0),t(C,null,P(e.startingLineups,(a=>(l(),t("div",{class:u(["player-card player-card-1 flex-column-center",{"player-card-active":e.swapData.length&&e.swapData.find((e=>e.value==a.value))}]),style:v({left:a.offsetX+"%",bottom:a.offsetY+"%"}),title:a.label+"("+a.value+")",onClick:l=>e.handleClick(a),onContextmenu:T((l=>e.handleMenu(l,"menuVisible",a)),["prevent"]),key:a.value},[s("div",Ga,[s("span",Za,y(a.playerdata.overallrating),1),s("div",el,y(e.getPlayerPositionByCode(a.playerdata.preferredposition1)),1)]),s("div",al,[s("div",ll,[f(S,{shape:"square",size:24,style:{width:"24px",height:"16px"},fit:"cover",src:e.getPlayerNationFlag(a.playerdata.nationality),onError:e=>!0},{default:g((()=>[s("img",{src:J||z},null,8,tl)])),_:2},1032,["src"]),s("p",sl,y(a.lineupData.jerseynumber),1)]),s("div",rl,[f(k,{style:{height:"100%",width:"100%"},lazy:"",src:e.getPlayerAvatar(a.playerdata.playerid,60),fit:"cover"},{placeholder:g((()=>[s("div",il,[s("img",{src:I||U,style:{"object-fit":"cover"}},null,8,nl)])])),error:g((()=>[s("div",ol,[s("img",{src:I||U,style:{"object-fit":"cover"}},null,8,dl)])])),_:2},1032,["src"])])]),s("div",cl,[f(V,null,{default:g((()=>[w(y(a.label),1)])),_:2},1024)])],46,Qa)))),128))]),s("div",ul,[s("div",pl,y(e.$t("message.starting")),1),s("div",ml,[(l(!0),t(C,null,P(e.getStarting11Players,(a=>(l(),t("div",{class:u(["player-card flex-column-center",{"player-card-active":e.swapData.length&&e.swapData.find((e=>e.value==a.value))}]),title:a.label+"("+a.value+")",onClick:l=>e.handleClick(a),onContextmenu:T((l=>e.handleMenu(l,"menuVisible",a)),["prevent"]),key:a.value},[s("div",fl,[s("span",gl,y(a.playerdata.overallrating),1),s("div",vl,y(e.getPlayerPositionByCode(a.playerdata.preferredposition1)),1)]),s("div",hl,[s("div",bl,[f(S,{shape:"square",size:24,style:{width:"24px",height:"16px"},fit:"cover",src:e.getPlayerNationFlag(a.playerdata.nationality),onError:e=>!0},{default:g((()=>[s("img",{src:J||z},null,8,Dl)])),_:2},1032,["src"]),s("p",xl,y(a.lineupData.jerseynumber),1)]),s("div",wl,[f(k,{style:{height:"100%",width:"100%"},lazy:"",src:e.getPlayerAvatar(a.playerdata.playerid,60),fit:"cover"},{placeholder:g((()=>[s("div",Cl,[s("img",{src:I||U,style:{"object-fit":"cover"}},null,8,Pl)])])),error:g((()=>[s("div",kl,[s("img",{src:I||U,style:{"object-fit":"cover"}},null,8,Sl)])])),_:2},1032,["src"])])]),s("div",Tl,[f(V,null,{default:g((()=>[w(y(a.label),1)])),_:2},1024)])],42,yl)))),128))])]),s("div",$l,[s("div",Vl,y(e.$t("message.sub")),1),s("div",_l,[(l(!0),t(C,null,P(e.getSubPlayers,(a=>(l(),t("div",{class:u(["player-card flex-column-center",{"player-card-active":e.swapData.length&&e.swapData.find((e=>e.value==a.value))}]),onClick:l=>e.handleClick(a),onContextmenu:T((l=>e.handleMenu(l,"menuVisible",a)),["prevent"]),title:a.label+"("+a.value+")",key:a.value},[s("div",Ol,[s("span",El,y(a.playerdata.overallrating),1),s("div",jl,y(e.getPlayerPositionByCode(a.playerdata.preferredposition1)),1)]),s("div",Fl,[s("div",Ll,[f(S,{shape:"square",size:24,style:{width:"24px",height:"16px"},fit:"cover",src:e.getPlayerNationFlag(a.playerdata.nationality),onError:e=>!0},{default:g((()=>[s("img",{src:J||z},null,8,ql)])),_:2},1032,["src"]),s("p",Ml,y(a.lineupData.jerseynumber),1)]),s("div",Al,[f(k,{style:{height:"100%",width:"100%"},lazy:"",src:e.getPlayerAvatar(a.playerdata.playerid,60),fit:"cover"},{placeholder:g((()=>[s("div",Bl,[s("img",{src:I||U,style:{"object-fit":"cover"}},null,8,Jl)])])),error:g((()=>[s("div",zl,[s("img",{src:I||U,style:{"object-fit":"cover"}},null,8,Il)])])),_:2},1032,["src"])])]),s("div",Ul,[f(V,null,{default:g((()=>[w(y(a.label),1)])),_:2},1024)])],42,Nl)))),128))])]),s("div",Rl,[s("div",Hl,y(e.$t("message.res")),1),s("div",Wl,[(l(!0),t(C,null,P(e.getResPlayers,(a=>(l(),t("div",{class:u(["player-card flex-column-center",{"player-card-active":e.swapData.length&&e.swapData.find((e=>e.value==a.value))}]),onClick:l=>e.handleClick(a),title:a.label+"("+a.value+")",onContextmenu:T((l=>e.handleMenu(l,"menuVisible",a)),["prevent"]),key:a.value},[s("div",Xl,[s("span",Yl,y(a.playerdata.overallrating),1),s("div",Ql,y(e.getPlayerPositionByCode(a.playerdata.preferredposition1)),1)]),s("div",Gl,[s("div",Zl,[f(S,{shape:"square",size:24,style:{width:"24px",height:"16px"},fit:"cover",src:e.getPlayerNationFlag(a.playerdata.nationality),onError:e=>!0},{default:g((()=>[s("img",{src:J||z},null,8,et)])),_:2},1032,["src"]),s("p",at,y(a.lineupData.jerseynumber),1)]),s("div",lt,[f(k,{style:{height:"100%",width:"100%"},lazy:"",src:e.getPlayerAvatar(a.playerdata.playerid,60),fit:"cover"},{placeholder:g((()=>[s("div",tt,[s("img",{src:I||U,style:{"object-fit":"cover"}},null,8,st)])])),error:g((()=>[s("div",rt,[s("img",{src:I||U,style:{"object-fit":"cover"}},null,8,it)])])),_:2},1032,["src"])])]),s("div",nt,[f(V,null,{default:g((()=>[w(y(a.label),1)])),_:2},1024)])],42,Kl)))),128))])])])):c("",!0)],64)):(l(),b(D,{key:0,rows:20,animated:""}))]),e.isShowEditPlayer?(l(),t("div",ot,[f(_,{onClose:e.handleCloseEdit,onSave:e.handleSaveEdit,hasHide:!1,playerID:e.currentEditPlayerId},null,8,["onClose","onSave","playerID"])])):c("",!0)])],64)):(l(),b(x,{key:1,description:e.$t("message.errorInfo")},null,8,["description"])),e.menuVisible?(l(),b(N,{key:2,visible:e.menuVisible,left:e.left,top:e.top,onUpdateNumber:e.handleUpdateNumber,onTransfer:a[5]||(a[5]=a=>e.transferOutVisible=!0),onDelete:e.handleDelete,onEdit:e.handleEditPlayer,contextData:e.contextData},null,8,["visible","left","top","onUpdateNumber","onDelete","onEdit","contextData"])):c("",!0),e.transferPlayer?(l(),b(O,{key:3,visible:e.transferPlayer,onSave:e.handleTransfer,onClose:a[6]||(a[6]=a=>e.transferPlayer=!1)},null,8,["visible","onSave"])):c("",!0),e.addPlayer?(l(),b(E,{key:4,visible:e.addPlayer,onSave:e.handleTransfer,onClose:a[7]||(a[7]=a=>e.addPlayer=!1)},null,8,["visible","onSave"])):c("",!0),e.transferOutVisible?(l(),b(j,{key:5,visible:e.transferOutVisible,row:e.contextData,onSave:e.handleTransferOut,onClose:a[8]||(a[8]=a=>e.transferOutVisible=!1)},null,8,["visible","row","onSave"])):c("",!0),e.autoSaveVisible?(l(),b(F,{key:6,state:e.savingState},null,8,["state"])):c("",!0)])}],["__scopeId","data-v-7b914ea5"]]);export{dt as default};
