import{u as e}from"./editSpace-e41568fa.js";import{u as a,t as l}from"./teamSelector-758530f1.js";import{u as t}from"./usePlayers-423ca759.js";import{l as o}from"./leagueSelector-14283c2a.js";import{_ as m}from"./plugin-vue_export-helper-46f75680.js";import{d as s,r as i,k as d,t as n,a as r,o as u,c,w as p,b as g,f as b,j as y,h as f,M as v,e as D,F as h,p as k,i as V,J as T,g as $}from"./index-96665695.js";import{s as x,g as S}from"./util-bc079373.js";import{t as C,_}from"./team_notfound-3d3bda0d.js";import{n as U,_ as j}from"./notflag-b23e2cb5.js";import{l as w}from"./lineup-1b573b63.js";const L=s({name:"StadiumSelectDialog",components:{},props:{visible:{type:Boolean,default:!1},stadium:{type:String,default:"-1"}},emits:["close","save"],setup(l,t){const o=e();let m=i({dialogVisible:l.visible,stadiumList:o.getAllStadiumList(),currentStadium:{}}),s={handleClose(){s.getCurrentStadium(),m.dialogVisible=!1,t.emit("close")},handleConfirm(){t.emit("save",m.currentStadium.value),m.dialogVisible=!1,t.emit("close")},getCurrentStadium(){let e=m.stadiumList.find((e=>e.value==l.stadium));m.currentStadium=e||{value:"-1",label:"No Stadium"}},handleChange(e){let a=m.stadiumList.findIndex((e=>e.value==m.currentStadium.value));if(e>0){let e=a+1;e>m.stadiumList.length-1&&(e=0),m.currentStadium=m.stadiumList[e]}else{let e=a-1;e<0&&(e=m.stadiumList.length-1),m.currentStadium=m.stadiumList[e]}}};return d((()=>{s.getCurrentStadium()})),{...n(m),...s,...a()}}}),N={class:"flex-column-center"},P={class:"stadium-selector-box"},q={class:"flex-center"},A={class:"stadium-img-box"},F={class:"flex-center"},E={style:{"margin-top":"20px"}},I={class:"dialog-footer"};const B=s({name:"TeamEdit",components:{teamSelector:l,leagueSelector:o,StadiumSelectDialog:m(L,[["render",function(e,a,l,t,o,m){const s=r("CaretLeft"),i=r("el-icon"),d=r("el-image"),n=r("CaretRight"),v=r("el-button"),D=r("el-dialog");return u(),c(D,{modelValue:e.dialogVisible,"onUpdate:modelValue":a[2]||(a[2]=a=>e.dialogVisible=a),title:e.$t("message.stadiumselect"),"before-close":e.handleClose,"custom-class":"z-dialog",center:"",width:500},{footer:p((()=>[g("span",I,[b(v,{onClick:e.handleClose},{default:p((()=>[y(f(e.$t("message.cancel")),1)])),_:1},8,["onClick"]),b(v,{type:"primary",onClick:e.handleConfirm},{default:p((()=>[y(f(e.$t("message.confirm")),1)])),_:1},8,["onClick"])])])),default:p((()=>[g("div",N,[g("div",P,[g("div",q,[b(i,{onClick:a[0]||(a[0]=a=>e.handleChange(-1))},{default:p((()=>[b(s)])),_:1})]),g("div",A,[b(d,{style:{height:"100%",width:"100%"},lazy:"",src:e.getStadiumBackground(e.currentStadium.value),fit:"cover"},null,8,["src"])]),g("div",F,[b(i,{onClick:a[1]||(a[1]=a=>e.handleChange(1))},{default:p((()=>[b(n)])),_:1})])]),g("p",E,f(e.currentStadium.label),1)])])),_:1},8,["modelValue","title","before-close"])}],["__scopeId","data-v-1b838803"]])},props:{},setup(l,o){const m=e(),{proxy:s}=$(),r=a(),u=t();let c=i({teamData:null,cloneTeamData:null,isNotFound:!1,teamPlayerLineup:null,marks:{10:"10",50:"50",90:"90"},stadiumVisible:!1,saveloading:!1}),p={handleColor(e,a){let l=S(e);c.cloneTeamData[`${a}r`]=l[0],c.cloneTeamData[`${a}g`]=l[1],c.cloneTeamData[`${a}b`]=l[2]},handleKitColor(e,a,l){let t=S(e);c.cloneTeamData.kits[l][`${a}r`]=t[0],c.cloneTeamData.kits[l][`${a}g`]=t[1],c.cloneTeamData.kits[l][`${a}b`]=t[2]},getTeamData(){var e,a;const l=s.$route.query.teamid;c.teamData=m.data.teams&&m.data.teams.find((e=>e.teamid==l));let t=m.data.teamkits&&JSON.parse(JSON.stringify(m.data.teamkits.filter((e=>e.teamtechid==l))));if(!c.teamData)return c.isNotFound=!0,void s.$message.warning(`${s.$t("message.notfoundteam")}`);c.cloneTeamData={},Object.keys(c.teamData).forEach((e=>{!isNaN(parseFloat(c.teamData[e]))&&isFinite(c.teamData[e])?"rivalteam"===e||e.endsWith("id")?c.cloneTeamData[e]=c.teamData[e]:c.cloneTeamData[e]=parseInt(c.teamData[e]):c.cloneTeamData[e]=c.teamData[e]})),c.cloneTeamData.leagueid=(null==(e=m.data.leagueteamlinks.find((e=>e.teamid==l)))?void 0:e.leagueid)||"-1",c.cloneTeamData.stadiumid=(null==(a=m.data.teamstadiumlinks.find((e=>e.teamid==l)))?void 0:a.stadiumid)||"-1",c.cloneTeamData.teamcolor1=x([c.teamData.teamcolor1r,c.teamData.teamcolor1g,c.teamData.teamcolor1b]),c.cloneTeamData.teamcolor2=x([c.teamData.teamcolor2r,c.teamData.teamcolor2g,c.teamData.teamcolor2b]),c.cloneTeamData.teamcolor3=x([c.teamData.teamcolor3r,c.teamData.teamcolor3g,c.teamData.teamcolor3b]),t&&t.length?(c.cloneTeamData.kits=[],t.forEach((e=>{e.teamcolorsec=x([e.teamcolorsecr,e.teamcolorsecg,e.teamcolorsecb]),e.teamcolorprim=x([e.teamcolorprimr,e.teamcolorprimg,e.teamcolorprimb]),e.teamcolortert=x([e.teamcolortertr,e.teamcolortertg,e.teamcolortertb]),e.jerseynamecolor=x([e.jerseynamecolorr,e.jerseynamecolorg,e.jerseynamecolorb]),c.cloneTeamData.kits.push(e)}))):c.cloneTeamData.kits=[{teamtechid:l,teamkittypetechid:0},{teamtechid:l,teamkittypetechid:1},{teamtechid:l,teamkittypetechid:2}]},getTeamPlayerLineup(){const e=s.$route.query.teamid;if(!m.data.teamplayerlinks)return;let a=m.data.teamplayerlinks.map((a=>{let l=null;a.teamid==e&&(l=m.data.players.find((e=>e.playerid==a.playerid)));let t=l?u.getPlayerName.value(l.firstnameid,l.lastnameid,l.commonnameid):"";return l?{label:t,value:a.playerid,playerdata:l}:null}));c.teamPlayerLineup=a.filter(Boolean)},handleSave(){c.saveloading=!0;let e=JSON.parse(JSON.stringify(c.cloneTeamData));const{leagueid:a,stadiumid:l,teamcolor1:t,teamcolor2:o,teamcolor3:s,kits:i,...d}=e;i.forEach((e=>{delete e.teamcolorprim,delete e.teamcolorsec,delete e.teamcolortert,delete e.jerseynamecolor})),m.saveTeamData(d,{leagueid:a,stadiumid:l,kits:i}),c.saveloading=!1},handleHide(){m.addHideList({sourceName:s.$route.name,sourceKey:"teamid",sourceID:s.$route.query.teamid,sourceType:r.getTeamAvatar.value(s.$route.query.teamid),sourceLabel:r.getTeamName.value(s.$route.query.teamid)}),s.$message.success(s.$t("message.hideSucceeded"))}};return d((()=>{p.getTeamPlayerLineup(),p.getTeamData()})),v((()=>s.$route.query.teamid),(e=>{e&&0!=e&&(p.getTeamPlayerLineup(),p.getTeamData())})),{...n(c),...p,editSpaceStore:m,...r,...u,setRgbTo16:x}}}),J={class:"full-layout flex-column-center scrollbar routerview",style:{"overflow-y":"auto"}},O={class:"flex-between full-w edit-header"},z={class:"flex-end",style:{"margin-left":"10px"}},K={class:"player-box full-layout"},H={class:"flex-between flex-warp"},M={class:"flex-start",style:{"align-items":"flex-end"}},R={class:"player-avatar"},W={class:"image-slot"},G=["src"],Q={class:"image-slot"},X=["src"],Y={class:"flex-column-end player-info"},Z={class:"player-name text-left"},ee={class:"flex-start"},ae=["src"],le={class:"player-formation"},te={class:"flex-between player-team"},oe={class:"img-box",style:{height:"80px"}},me=["src","title"],se=["src","title"],ie={class:"tab-1"},de={style:{margin:"20px 0"}},ne={class:"tab-1"},re={style:{margin:"20px 0"}},ue={class:"tab-1"},ce={class:"flex-between full-h"},pe={style:{float:"right"}};var ge=m(B,[["render",function(e,a,l,t,o,m){const s=r("ArrowLeftBold"),i=r("el-icon"),d=r("el-button"),n=r("el-skeleton"),v=r("el-empty"),$=r("el-image"),x=r("el-avatar"),S=r("el-input"),L=r("el-input-number"),N=r("el-color-picker"),P=r("teamSelector"),q=r("leagueSelector"),A=r("el-option"),F=r("el-select"),E=r("el-form-item"),I=r("el-form"),B=r("el-slider"),ge=r("el-switch"),be=r("StadiumSelectDialog");return u(),D("div",J,[e.editSpaceStore.isUpload?(u(),D(h,{key:0},[g("div",O,[b(i,{class:"back-icon",onClick:a[0]||(a[0]=a=>e.$router.go(-1))},{default:p((()=>[b(s)])),_:1}),g("div",z,[b(d,{type:"info",onClick:e.handleHide},{default:p((()=>[y(f(e.$t("message.hide")),1)])),_:1},8,["onClick"]),b(d,{type:"success",onClick:e.handleSave,loading:e.saveloading},{default:p((()=>[y(f(e.$t("message.save")),1)])),_:1},8,["onClick","loading"])])]),g("div",K,[e.teamData||e.isNotFound?!e.teamData&&e.isNotFound?(u(),c(v,{key:1,description:e.$t("message.notfoundteam")},null,8,["description"])):(u(),D(h,{key:2},[g("div",H,[g("div",M,[g("div",R,[b($,{style:{height:"100%",width:"100%"},lazy:"",src:e.getTeamAvatar(e.teamData.teamid,120),fit:"cover"},{placeholder:p((()=>[g("div",W,[g("img",{src:C||_,style:{"object-fit":"cover"}},null,8,G)])])),error:p((()=>[g("div",Q,[g("img",{src:C||_,style:{"object-fit":"cover"}},null,8,X)])])),_:1},8,["src"])]),g("div",Y,[g("p",Z,f(e.teamData.teamname+`  (${e.teamData.teamid})`),1),g("div",ee,[b(x,{shape:"square",size:24,style:{width:"24px",height:"16px"},fit:"cover",src:e.getTeamNationFlag(e.teamData.teamid),onError:e=>!0},{default:p((()=>[g("img",{src:U||j},null,8,ae)])),_:1},8,["src"]),g("span",le,f(e.getTeamLeagueName(e.teamData.teamid)),1)])])]),g("div",te,[g("div",oe,[g("img",{src:w,onClick:a[1]||(a[1]=a=>e.$router.push({name:"teamLineupEdit",query:{teamid:e.cloneTeamData.teamid}})),style:{transform:"rotate(90deg)"},title:e.$t("message.lineupManagement")},null,8,me)]),g("div",{class:"img-box",onClick:a[2]||(a[2]=a=>e.stadiumVisible=!0)},[g("img",{src:"/static/png/stadium-a3169e20.png",title:e.$t("message.stadiumManagement")},null,8,se)])])]),e.cloneTeamData&&e.cloneTeamData.teamid?(u(),D(h,{key:0},[g("div",ie,f(e.$t("message.baseData")),1),g("div",de,[b(I,{inline:!0,model:e.cloneTeamData,class:"flex-start flex-warp"},{default:p((()=>[(u(!0),D(h,null,k(e.$config.teamBaseData,(a=>(u(),c(E,{key:a.label,label:e.$t(`message.${a.label}`)},{default:p((()=>["input"===a.type?(u(),c(S,{key:0,modelValue:e.cloneTeamData[a.label],"onUpdate:modelValue":l=>e.cloneTeamData[a.label]=l},null,8,["modelValue","onUpdate:modelValue"])):"number"===a.type?(u(),c(L,{key:1,modelValue:e.cloneTeamData[a.label],"onUpdate:modelValue":l=>e.cloneTeamData[a.label]=l,min:a.min,max:a.max},null,8,["modelValue","onUpdate:modelValue","min","max"])):"color"===a.type?(u(),c(N,{key:2,modelValue:e.cloneTeamData[a.label],"onUpdate:modelValue":l=>e.cloneTeamData[a.label]=l,onActiveChange:l=>e.handleColor(l,a.label)},null,8,["modelValue","onUpdate:modelValue","onActiveChange"])):"teamselect"===a.type?(u(),c(P,{key:3,modelValue:e.cloneTeamData[a.label],"onUpdate:modelValue":l=>e.cloneTeamData[a.label]=l},null,8,["modelValue","onUpdate:modelValue"])):"leagueselect"===a.type?(u(),c(q,{key:4,modelValue:e.cloneTeamData[a.value],"onUpdate:modelValue":l=>e.cloneTeamData[a.value]=l},null,8,["modelValue","onUpdate:modelValue"])):"playerselect"===a.type?(u(),c(F,{key:5,modelValue:e.cloneTeamData[a.value],"onUpdate:modelValue":l=>e.cloneTeamData[a.value]=l,multiple:a.multiple,placeholder:e.$t("message.selectPlaceholder")},{default:p((()=>[(u(!0),D(h,null,k(e.teamPlayerLineup,(e=>(u(),c(A,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:2},1032,["modelValue","onUpdate:modelValue","multiple","placeholder"])):V("",!0)])),_:2},1032,["label"])))),128))])),_:1},8,["model"])]),g("div",ne,f(e.$t("message.tactic")),1),g("div",re,[b(I,{inline:!0,model:e.cloneTeamData,class:"flex-start flex-warp"},{default:p((()=>[(u(!0),D(h,null,k(e.$config.teamTactic,(a=>(u(),c(E,{key:a.label,label:e.$t(`message.${a.label}`),style:{"margin-bottom":"30px"}},{default:p((()=>["slide"===a.type?(u(),c(B,{key:0,modelValue:e.cloneTeamData[a.label],"onUpdate:modelValue":l=>e.cloneTeamData[a.label]=l,min:1,max:100,step:1,marks:e.marks},null,8,["modelValue","onUpdate:modelValue","marks"])):"select"===a.type?(u(),c(F,{key:1,modelValue:e.cloneTeamData[a.label],"onUpdate:modelValue":l=>e.cloneTeamData[a.label]=l,placeholder:e.$t("message.selectPlaceholder")},{default:p((()=>[(u(!0),D(h,null,k(a.data,(a=>(u(),c(A,{key:a.value,label:e.$t(`message.${a.label}`),value:a.value},null,8,["label","value"])))),128))])),_:2},1032,["modelValue","onUpdate:modelValue","placeholder"])):V("",!0)])),_:2},1032,["label"])))),128))])),_:1},8,["model"])]),g("div",ue,f(e.$t("message.jersey")),1),(u(!0),D(h,null,k(e.cloneTeamData.kits,((a,l)=>(u(),D("div",{style:{margin:"20px 0"},key:a.teamkitid},[g("div",{class:"tab-1",style:T({borderLeftColor:e.setRgbTo16([a.teamcolorsecr,a.teamcolorsecg,a.teamcolorsecb])})},f(e.$t(`message.jersey${a.teamkittypetechid}`)),5),b(I,{inline:!0,model:a,class:"flex-start flex-warp"},{default:p((()=>[(u(!0),D(h,null,k(e.$config.teamKits,(t=>(u(),c(E,{key:t.label,label:e.$t(`message.${t.label}`)},{default:p((()=>["number"===t.type?(u(),c(L,{key:0,modelValue:a[t.label],"onUpdate:modelValue":e=>a[t.label]=e,min:t.min,max:t.max},null,8,["modelValue","onUpdate:modelValue","min","max"])):"color"===t.type?(u(),c(N,{key:1,modelValue:a[t.label],"onUpdate:modelValue":e=>a[t.label]=e,onActiveChange:a=>e.handleKitColor(a,t.label,l)},null,8,["modelValue","onUpdate:modelValue","onActiveChange"])):"select"!==t.type||t.iscustom?"select"===t.type&&t.iscustom?(u(),c(F,{key:3,modelValue:a[t.label],"onUpdate:modelValue":e=>a[t.label]=e,multiple:t.multiple,placeholder:e.$t("message.selectPlaceholder")},{default:p((()=>[(u(!0),D(h,null,k(t.data,(e=>(u(),c(A,{key:e.value,label:e.label,value:e.value},{default:p((()=>[g("div",ce,[g("span",{style:T({backgroundColor:e.label}),class:"select-color"},null,4),g("span",pe,f(e.label),1)])])),_:2},1032,["label","value"])))),128))])),_:2},1032,["modelValue","onUpdate:modelValue","multiple","placeholder"])):"switch"===t.type?(u(),c(ge,{key:4,modelValue:a[t.label],"onUpdate:modelValue":e=>a[t.label]=e,"active-value":t.activeValue,"inactive-value":t.inactiveValue,"active-text":e.$t("message.yes"),"inactive-text":e.$t("message.no")},null,8,["modelValue","onUpdate:modelValue","active-value","inactive-value","active-text","inactive-text"])):V("",!0):(u(),c(F,{key:2,modelValue:a[t.label],"onUpdate:modelValue":e=>a[t.label]=e,multiple:t.multiple,placeholder:e.$t("message.selectPlaceholder")},{default:p((()=>[(u(!0),D(h,null,k(t.data,(a=>(u(),c(A,{key:a.value,label:e.$t(`message.${a.label}`),value:a.value},null,8,["label","value"])))),128))])),_:2},1032,["modelValue","onUpdate:modelValue","multiple","placeholder"]))])),_:2},1032,["label"])))),128))])),_:2},1032,["model"])])))),128))],64)):V("",!0)],64)):(u(),c(n,{key:0,rows:20,animated:""}))])],64)):(u(),c(v,{key:1,description:e.$t("message.errorInfo")},null,8,["description"])),e.stadiumVisible?(u(),c(be,{key:2,visible:e.stadiumVisible,stadium:e.cloneTeamData.stadiumid,onSave:a[3]||(a[3]=a=>e.cloneTeamData.stadiumid=a),onClose:a[4]||(a[4]=a=>e.stadiumVisible=!1)},null,8,["visible","stadium"])):V("",!0)])}],["__scopeId","data-v-067d31ba"]]);export{ge as default};
