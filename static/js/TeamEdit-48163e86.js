var e=Object.defineProperty,a=Object.defineProperties,l=Object.getOwnPropertyDescriptors,t=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,m=Object.prototype.propertyIsEnumerable,i=(a,l,t)=>l in a?e(a,l,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[l]=t,s=(e,a)=>{for(var l in a||(a={}))o.call(a,l)&&i(e,l,a[l]);if(t)for(var l of t(a))m.call(a,l)&&i(e,l,a[l]);return e},r=(e,t)=>a(e,l(t));import{_ as d}from"./lineup-cdc0ea31.js";import{_ as n}from"./notflag-60268a62.js";import{_ as c}from"./team_notfound-5b1be68a.js";import{u}from"./editSpace-1b191725.js";import{u as p,t as g}from"./teamSelector-c298a99b.js";import{u as b}from"./usePlayers-419bd8bb.js";import{l as y}from"./leagueSelector-3270fdb8.js";import{_ as f}from"./plugin-vue_export-helper-46f75680.js";import{d as v,r as D,k as h,t as k,a as V,o as T,c as $,w as x,b as S,f as C,j as _,h as U,M as j,e as w,F as L,p as P,i as N,I as O,g as q}from"./index-89098adb.js";import{s as A,g as F}from"./util-2389c53c.js";const I=v({name:"StadiumSelectDialog",components:{},props:{visible:{type:Boolean,default:!1},stadium:{type:String,default:"-1"}},emits:["close","save"],setup(e,a){const l=u();let t=D({dialogVisible:e.visible,stadiumList:l.getAllStadiumList(),currentStadium:{}}),o={handleClose(){o.getCurrentStadium(),t.dialogVisible=!1,a.emit("close")},handleConfirm(){a.emit("save",t.currentStadium.value),t.dialogVisible=!1,a.emit("close")},getCurrentStadium(){let a=t.stadiumList.find((a=>a.value==e.stadium));t.currentStadium=a||{value:"-1",label:"No Stadium"}},handleChange(e){let a=t.stadiumList.findIndex((e=>e.value==t.currentStadium.value));if(e>0){let e=a+1;e>t.stadiumList.length-1&&(e=0),t.currentStadium=t.stadiumList[e]}else{let e=a-1;e<0&&(e=t.stadiumList.length-1),t.currentStadium=t.stadiumList[e]}}};return h((()=>{o.getCurrentStadium()})),s(s(s({},k(t)),o),p())}}),E={class:"flex-column-center"},B={class:"stadium-selector-box"},z={class:"flex-center"},J={class:"stadium-img-box"},K={class:"flex-center"},H={style:{"margin-top":"20px"}},M={class:"dialog-footer"};const R=v({name:"TeamEdit",components:{teamSelector:g,leagueSelector:y,StadiumSelectDialog:f(I,[["render",function(e,a,l,t,o,m){const i=V("CaretLeft"),s=V("el-icon"),r=V("el-image"),d=V("CaretRight"),n=V("el-button"),c=V("el-dialog");return T(),$(c,{modelValue:e.dialogVisible,"onUpdate:modelValue":a[2]||(a[2]=a=>e.dialogVisible=a),title:e.$t("message.stadiumselect"),"before-close":e.handleClose,"custom-class":"z-dialog",center:"",width:500},{footer:x((()=>[S("span",M,[C(n,{onClick:e.handleClose},{default:x((()=>[_(U(e.$t("message.cancel")),1)])),_:1},8,["onClick"]),C(n,{type:"primary",onClick:e.handleConfirm},{default:x((()=>[_(U(e.$t("message.confirm")),1)])),_:1},8,["onClick"])])])),default:x((()=>[S("div",E,[S("div",B,[S("div",z,[C(s,{onClick:a[0]||(a[0]=a=>e.handleChange(-1))},{default:x((()=>[C(i)])),_:1})]),S("div",J,[C(r,{style:{height:"100%",width:"100%"},lazy:"",src:e.getStadiumBackground(e.currentStadium.value),fit:"cover"},null,8,["src"])]),S("div",K,[C(s,{onClick:a[1]||(a[1]=a=>e.handleChange(1))},{default:x((()=>[C(d)])),_:1})])]),S("p",H,U(e.currentStadium.label),1)])])),_:1},8,["modelValue","title","before-close"])}],["__scopeId","data-v-1b838803"]])},props:{},setup(e,a){const l=u(),{proxy:i}=q(),d=p(),n=b();let c=D({teamData:null,cloneTeamData:null,isNotFound:!1,teamPlayerLineup:null,marks:{10:"10",50:"50",90:"90"},stadiumVisible:!1,saveloading:!1}),g={handleColor(e,a){let l=F(e);c.cloneTeamData[`${a}r`]=l[0],c.cloneTeamData[`${a}g`]=l[1],c.cloneTeamData[`${a}b`]=l[2]},handleKitColor(e,a,l){let t=F(e);c.cloneTeamData.kits[l][`${a}r`]=t[0],c.cloneTeamData.kits[l][`${a}g`]=t[1],c.cloneTeamData.kits[l][`${a}b`]=t[2]},getTeamData(){var e,a;const t=i.$route.query.teamid;c.teamData=l.data.teams&&l.data.teams.find((e=>e.teamid==t));let o=l.data.teamkits&&JSON.parse(JSON.stringify(l.data.teamkits.filter((e=>e.teamtechid==t))));if(!c.teamData)return c.isNotFound=!0,void i.$message.warning(`${i.$t("message.notfoundteam")}`);c.cloneTeamData={},Object.keys(c.teamData).forEach((e=>{!isNaN(parseFloat(c.teamData[e]))&&isFinite(c.teamData[e])?"rivalteam"===e||e.endsWith("id")?c.cloneTeamData[e]=c.teamData[e]:c.cloneTeamData[e]=parseInt(c.teamData[e]):c.cloneTeamData[e]=c.teamData[e]})),c.cloneTeamData.leagueid=(null==(e=l.data.leagueteamlinks.find((e=>e.teamid==t)))?void 0:e.leagueid)||"-1",c.cloneTeamData.stadiumid=(null==(a=l.data.teamstadiumlinks.find((e=>e.teamid==t)))?void 0:a.stadiumid)||"-1",c.cloneTeamData.teamcolor1=A([c.teamData.teamcolor1r,c.teamData.teamcolor1g,c.teamData.teamcolor1b]),c.cloneTeamData.teamcolor2=A([c.teamData.teamcolor2r,c.teamData.teamcolor2g,c.teamData.teamcolor2b]),c.cloneTeamData.teamcolor3=A([c.teamData.teamcolor3r,c.teamData.teamcolor3g,c.teamData.teamcolor3b]),o&&o.length?(c.cloneTeamData.kits=[],o.forEach((e=>{e.teamcolorsec=A([e.teamcolorsecr,e.teamcolorsecg,e.teamcolorsecb]),e.teamcolorprim=A([e.teamcolorprimr,e.teamcolorprimg,e.teamcolorprimb]),e.teamcolortert=A([e.teamcolortertr,e.teamcolortertg,e.teamcolortertb]),e.jerseynamecolor=A([e.jerseynamecolorr,e.jerseynamecolorg,e.jerseynamecolorb]),c.cloneTeamData.kits.push(e)}))):c.cloneTeamData.kits=[{teamtechid:t,teamkittypetechid:0},{teamtechid:t,teamkittypetechid:1},{teamtechid:t,teamkittypetechid:2}]},getTeamPlayerLineup(){const e=i.$route.query.teamid;if(!l.data.teamplayerlinks)return;let a=l.data.teamplayerlinks.map((a=>{let t=null;a.teamid==e&&(t=l.data.players.find((e=>e.playerid==a.playerid)));let o=t?n.getPlayerName.value(t.firstnameid,t.lastnameid,t.commonnameid):"";return t?{label:o,value:a.playerid,playerdata:t}:null}));c.teamPlayerLineup=a.filter(Boolean)},handleSave(){c.saveloading=!0;const e=JSON.parse(JSON.stringify(c.cloneTeamData)),{leagueid:a,stadiumid:i,teamcolor1:s,teamcolor2:r,teamcolor3:d,kits:n}=e,u=((e,a)=>{var l={};for(var i in e)o.call(e,i)&&a.indexOf(i)<0&&(l[i]=e[i]);if(null!=e&&t)for(var i of t(e))a.indexOf(i)<0&&m.call(e,i)&&(l[i]=e[i]);return l})(e,["leagueid","stadiumid","teamcolor1","teamcolor2","teamcolor3","kits"]);n.forEach((e=>{delete e.teamcolorprim,delete e.teamcolorsec,delete e.teamcolortert,delete e.jerseynamecolor})),l.saveTeamData(u,{leagueid:a,stadiumid:i,kits:n}),c.saveloading=!1},handleHide(){l.addHideList({sourceName:i.$route.name,sourceKey:"teamid",sourceID:i.$route.query.teamid,sourceType:d.getTeamAvatar.value(i.$route.query.teamid),sourceLabel:d.getTeamName.value(i.$route.query.teamid)}),i.$message.success(i.$t("message.hideSucceeded"))}};return h((()=>{g.getTeamPlayerLineup(),g.getTeamData()})),j((()=>i.$route.query.teamid),(e=>{e&&0!=e&&(g.getTeamPlayerLineup(),g.getTeamData())})),r(s(s(r(s(s({},k(c)),g),{editSpaceStore:l}),d),n),{setRgbTo16:A})}}),W={class:"full-layout flex-column-center scrollbar routerview",style:{"overflow-y":"auto"}},G={class:"flex-between full-w edit-header"},Q={class:"flex-end",style:{"margin-left":"10px"}},X={class:"player-box full-layout"},Y={class:"flex-between flex-warp"},Z={class:"flex-start",style:{"align-items":"flex-end"}},ee={class:"player-avatar"},ae={class:"image-slot"},le=["src"],te={class:"image-slot"},oe=["src"],me={class:"flex-column-end player-info"},ie={class:"player-name text-left"},se={class:"flex-start"},re=["src"],de={class:"player-formation"},ne={class:"flex-between player-team"},ce={class:"img-box",style:{height:"80px"}},ue=["src","title"],pe=["src","title"],ge={class:"tab-1"},be={style:{margin:"20px 0"}},ye={class:"tab-1"},fe={style:{margin:"20px 0"}},ve={class:"tab-1"},De={class:"flex-between full-h"},he={style:{float:"right"}};var ke=f(R,[["render",function(e,a,l,t,o,m){const i=V("ArrowLeftBold"),s=V("el-icon"),r=V("el-button"),u=V("el-skeleton"),p=V("el-empty"),g=V("el-image"),b=V("el-avatar"),y=V("el-input"),f=V("el-input-number"),v=V("el-color-picker"),D=V("teamSelector"),h=V("leagueSelector"),k=V("el-option"),j=V("el-select"),q=V("el-form-item"),A=V("el-form"),F=V("el-slider"),I=V("el-switch"),E=V("StadiumSelectDialog");return T(),w("div",W,[e.editSpaceStore.isUpload?(T(),w(L,{key:0},[S("div",G,[C(s,{class:"back-icon",onClick:a[0]||(a[0]=a=>e.$router.go(-1))},{default:x((()=>[C(i)])),_:1}),S("div",Q,[C(r,{type:"info",onClick:e.handleHide},{default:x((()=>[_(U(e.$t("message.hide")),1)])),_:1},8,["onClick"]),C(r,{type:"success",onClick:e.handleSave,loading:e.saveloading},{default:x((()=>[_(U(e.$t("message.save")),1)])),_:1},8,["onClick","loading"])])]),S("div",X,[e.teamData||e.isNotFound?!e.teamData&&e.isNotFound?(T(),$(p,{key:1,description:e.$t("message.notfoundteam")},null,8,["description"])):(T(),w(L,{key:2},[S("div",Y,[S("div",Z,[S("div",ee,[C(g,{style:{height:"100%",width:"100%"},lazy:"",src:e.getTeamAvatar(e.teamData.teamid,120),fit:"cover"},{placeholder:x((()=>[S("div",ae,[S("img",{src:c,style:{"object-fit":"cover"}},null,8,le)])])),error:x((()=>[S("div",te,[S("img",{src:c,style:{"object-fit":"cover"}},null,8,oe)])])),_:1},8,["src"])]),S("div",me,[S("p",ie,U(e.teamData.teamname+`  (${e.teamData.teamid})`),1),S("div",se,[C(b,{shape:"square",size:24,style:{width:"24px",height:"16px"},fit:"cover",src:e.getTeamNationFlag(e.teamData.teamid),onError:e=>!0},{default:x((()=>[S("img",{src:n},null,8,re)])),_:1},8,["src"]),S("span",de,U(e.getTeamLeagueName(e.teamData.teamid)),1)])])]),S("div",ne,[S("div",ce,[S("img",{src:d,onClick:a[1]||(a[1]=a=>e.$router.push({name:"teamLineupEdit",query:{teamid:e.cloneTeamData.teamid}})),style:{transform:"rotate(90deg)"},title:e.$t("message.lineupManagement")},null,8,ue)]),S("div",{class:"img-box",onClick:a[2]||(a[2]=a=>e.stadiumVisible=!0)},[S("img",{src:"/static/png/stadium-a3169e20.png",title:e.$t("message.stadiumManagement")},null,8,pe)])])]),e.cloneTeamData&&e.cloneTeamData.teamid?(T(),w(L,{key:0},[S("div",ge,U(e.$t("message.baseData")),1),S("div",be,[C(A,{inline:!0,model:e.cloneTeamData,class:"flex-start flex-warp"},{default:x((()=>[(T(!0),w(L,null,P(e.$config.teamBaseData,(a=>(T(),$(q,{key:a.label,label:e.$t(`message.${a.label}`)},{default:x((()=>["input"===a.type?(T(),$(y,{key:0,modelValue:e.cloneTeamData[a.label],"onUpdate:modelValue":l=>e.cloneTeamData[a.label]=l},null,8,["modelValue","onUpdate:modelValue"])):"number"===a.type?(T(),$(f,{key:1,modelValue:e.cloneTeamData[a.label],"onUpdate:modelValue":l=>e.cloneTeamData[a.label]=l,min:a.min,max:a.max},null,8,["modelValue","onUpdate:modelValue","min","max"])):"color"===a.type?(T(),$(v,{key:2,modelValue:e.cloneTeamData[a.label],"onUpdate:modelValue":l=>e.cloneTeamData[a.label]=l,onActiveChange:l=>e.handleColor(l,a.label)},null,8,["modelValue","onUpdate:modelValue","onActiveChange"])):"teamselect"===a.type?(T(),$(D,{key:3,modelValue:e.cloneTeamData[a.label],"onUpdate:modelValue":l=>e.cloneTeamData[a.label]=l},null,8,["modelValue","onUpdate:modelValue"])):"leagueselect"===a.type?(T(),$(h,{key:4,modelValue:e.cloneTeamData[a.value],"onUpdate:modelValue":l=>e.cloneTeamData[a.value]=l},null,8,["modelValue","onUpdate:modelValue"])):"playerselect"===a.type?(T(),$(j,{key:5,modelValue:e.cloneTeamData[a.value],"onUpdate:modelValue":l=>e.cloneTeamData[a.value]=l,multiple:a.multiple,placeholder:e.$t("message.selectPlaceholder")},{default:x((()=>[(T(!0),w(L,null,P(e.teamPlayerLineup,(e=>(T(),$(k,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:2},1032,["modelValue","onUpdate:modelValue","multiple","placeholder"])):N("",!0)])),_:2},1032,["label"])))),128))])),_:1},8,["model"])]),S("div",ye,U(e.$t("message.tactic")),1),S("div",fe,[C(A,{inline:!0,model:e.cloneTeamData,class:"flex-start flex-warp"},{default:x((()=>[(T(!0),w(L,null,P(e.$config.teamTactic,(a=>(T(),$(q,{key:a.label,label:e.$t(`message.${a.label}`),style:{"margin-bottom":"30px"}},{default:x((()=>["slide"===a.type?(T(),$(F,{key:0,modelValue:e.cloneTeamData[a.label],"onUpdate:modelValue":l=>e.cloneTeamData[a.label]=l,min:1,max:100,step:1,marks:e.marks},null,8,["modelValue","onUpdate:modelValue","marks"])):"select"===a.type?(T(),$(j,{key:1,modelValue:e.cloneTeamData[a.label],"onUpdate:modelValue":l=>e.cloneTeamData[a.label]=l,placeholder:e.$t("message.selectPlaceholder")},{default:x((()=>[(T(!0),w(L,null,P(a.data,(a=>(T(),$(k,{key:a.value,label:e.$t(`message.${a.label}`),value:a.value},null,8,["label","value"])))),128))])),_:2},1032,["modelValue","onUpdate:modelValue","placeholder"])):N("",!0)])),_:2},1032,["label"])))),128))])),_:1},8,["model"])]),S("div",ve,U(e.$t("message.jersey")),1),(T(!0),w(L,null,P(e.cloneTeamData.kits,((a,l)=>(T(),w("div",{style:{margin:"20px 0"},key:a.teamkitid},[S("div",{class:"tab-1",style:O({borderLeftColor:e.setRgbTo16([a.teamcolorsecr,a.teamcolorsecg,a.teamcolorsecb])})},U(e.$t(`message.jersey${a.teamkittypetechid}`)),5),C(A,{inline:!0,model:a,class:"flex-start flex-warp"},{default:x((()=>[(T(!0),w(L,null,P(e.$config.teamKits,(t=>(T(),$(q,{key:t.label,label:e.$t(`message.${t.label}`)},{default:x((()=>["number"===t.type?(T(),$(f,{key:0,modelValue:a[t.label],"onUpdate:modelValue":e=>a[t.label]=e,min:t.min,max:t.max},null,8,["modelValue","onUpdate:modelValue","min","max"])):"color"===t.type?(T(),$(v,{key:1,modelValue:a[t.label],"onUpdate:modelValue":e=>a[t.label]=e,onActiveChange:a=>e.handleKitColor(a,t.label,l)},null,8,["modelValue","onUpdate:modelValue","onActiveChange"])):"select"!==t.type||t.iscustom?"select"===t.type&&t.iscustom?(T(),$(j,{key:3,modelValue:a[t.label],"onUpdate:modelValue":e=>a[t.label]=e,multiple:t.multiple,placeholder:e.$t("message.selectPlaceholder")},{default:x((()=>[(T(!0),w(L,null,P(t.data,(e=>(T(),$(k,{key:e.value,label:e.label,value:e.value},{default:x((()=>[S("div",De,[S("span",{style:O({backgroundColor:e.label}),class:"select-color"},null,4),S("span",he,U(e.label),1)])])),_:2},1032,["label","value"])))),128))])),_:2},1032,["modelValue","onUpdate:modelValue","multiple","placeholder"])):"switch"===t.type?(T(),$(I,{key:4,modelValue:a[t.label],"onUpdate:modelValue":e=>a[t.label]=e,"active-value":t.activeValue,"inactive-value":t.inactiveValue,"active-text":e.$t("message.yes"),"inactive-text":e.$t("message.no")},null,8,["modelValue","onUpdate:modelValue","active-value","inactive-value","active-text","inactive-text"])):N("",!0):(T(),$(j,{key:2,modelValue:a[t.label],"onUpdate:modelValue":e=>a[t.label]=e,multiple:t.multiple,placeholder:e.$t("message.selectPlaceholder")},{default:x((()=>[(T(!0),w(L,null,P(t.data,(a=>(T(),$(k,{key:a.value,label:e.$t(`message.${a.label}`),value:a.value},null,8,["label","value"])))),128))])),_:2},1032,["modelValue","onUpdate:modelValue","multiple","placeholder"]))])),_:2},1032,["label"])))),128))])),_:2},1032,["model"])])))),128))],64)):N("",!0)],64)):(T(),$(u,{key:0,rows:20,animated:""}))])],64)):(T(),$(p,{key:1,description:e.$t("message.errorInfo")},null,8,["description"])),e.stadiumVisible?(T(),$(E,{key:2,visible:e.stadiumVisible,stadium:e.cloneTeamData.stadiumid,onSave:a[3]||(a[3]=a=>e.cloneTeamData.stadiumid=a),onClose:a[4]||(a[4]=a=>e.stadiumVisible=!1)},null,8,["visible","stadium"])):N("",!0)])}],["__scopeId","data-v-067d31ba"]]);export{ke as default};
