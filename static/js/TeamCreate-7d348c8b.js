var e=Object.defineProperty,a=Object.defineProperties,l=Object.getOwnPropertyDescriptors,t=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,m=Object.prototype.propertyIsEnumerable,s=(a,l,t)=>l in a?e(a,l,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[l]=t,r=(e,a)=>{for(var l in a||(a={}))o.call(a,l)&&s(e,l,a[l]);if(t)for(var l of t(a))m.call(a,l)&&s(e,l,a[l]);return e},n=(e,t)=>a(e,l(t));import{u as i}from"./editSpace-2e26d252.js";import{t as d,u as c}from"./teamSelector-2ced0189.js";import{u}from"./usePlayers-0851ab0a.js";import{l as p}from"./leagueSelector-07ba8302.js";import{s as b,g}from"./util-afc48526.js";import{_ as f}from"./plugin-vue_export-helper-46f75680.js";import{d as v,r as y,J as h,k as V,t as D,a as k,o as $,c as T,w as x,b as S,h as O,e as U,F as w,f as C,p as _,j,i as P,L as N,g as I}from"./index-72dc38ce.js";const F=v({name:"stadiumSelector",components:{},props:{modelValue:{type:String,default:""},filterable:{type:Boolean,default:!0},remote:{type:Boolean,default:!0},multiple:{type:Boolean,default:!1},clearable:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1}},emits:["update:modelValue","change"],setup(e,a){const l=i();let t=y({selectOptions:[],valueName:"",selectLoading:!1,cloneSelectOptions:[]}),o={handleSelectVisible(e){e||(t.selectOptions=t.cloneSelectOptions)},remoteMethod(e){if(""!==e){let l;t.selectLoading=!0,l&&clearTimeout(l),l=setTimeout((()=>{if(t.selectLoading=!1,!isNaN(parseFloat(e))&&isFinite(e))return void(t.selectOptions=t.cloneSelectOptions.filter((a=>a.value==e)));let a=new RegExp(e,"i");t.selectOptions=t.cloneSelectOptions.filter((e=>a.test(e.label)))}),500),a.emit("update:modelValue",t.valueName)}else t.selectOptions=t.cloneSelectOptions},handleChange(e){a.emit("update:modelValue",e),a.emit("change",e)}};return h((()=>e.modelValue),(a=>{t.valueName=e.modelValue})),V((()=>{t.selectOptions=l.getAllStadiumList(),t.cloneSelectOptions=JSON.parse(JSON.stringify(t.selectOptions)),t.valueName=e.modelValue})),r(r({},D(t)),o)}}),L={style:{"margin-right":"8px"}},K={style:{color:"var(--el-text-color-secondary)","font-size":"13px"}};const B=v({name:"TeamCreate",components:{teamSelector:d,leagueSelector:p,stadiumSelector:f(F,[["render",function(e,a,l,t,o,m){const s=k("el-select-v2");return $(),T(s,{modelValue:e.valueName,"onUpdate:modelValue":a[0]||(a[0]=a=>e.valueName=a),filterable:e.filterable,remote:e.remote,multiple:e.multiple,clearable:e.clearable,disabled:e.disabled,options:e.selectOptions,onVisibleChange:e.handleSelectVisible,placeholder:e.$t("message.selectTeamPlaceholder"),onChange:e.handleChange,"remote-method":e.remoteMethod,loading:e.selectLoading},{default:x((({item:e})=>[S("span",L,O(e.value),1),S("span",K,O(e.label),1)])),_:1},8,["modelValue","filterable","remote","multiple","clearable","disabled","options","onVisibleChange","placeholder","onChange","remote-method","loading"])}]])},props:{},setup(e,a){const l=i(),{proxy:t}=I(),o=c(),m=u();let s=y({teamData:null,cloneTeamData:{kits:[]},teamPlayerLineup:[{label:"none",value:"0"}],marks:{10:"10",50:"50",90:"90"},saveloading:!1}),d={handleId(e){s.cloneTeamData.teamid=/^[0-9]*$/.test(parseInt(e))?String(parseInt(e)).replace(".",""):"",parseInt(e)>2e5&&(s.cloneTeamData.teamid="200000")},handleColor(e,a){let l=g(e);s.cloneTeamData[`${a}r`]=l[0],s.cloneTeamData[`${a}g`]=l[1],s.cloneTeamData[`${a}b`]=l[2]},handleKitColor(e,a,l){let t=g(e);s.cloneTeamData.kits[l][`${a}r`]=t[0],s.cloneTeamData.kits[l][`${a}g`]=t[1],s.cloneTeamData.kits[l][`${a}b`]=t[2]},handleValidates:e=>new Promise(((a,l)=>{if(!t.$refs[e])return a(!0),!1;-1===e.indexOf("Kit")?t.$refs[e].validate((e=>{e?a(!0):l(new Error(t.$t("message.checkedFailed")))})):t.$refs[e][0].validate((e=>{e?a(!0):l(new Error(t.$t("message.checkedFailed")))}))})),handleSave(){s.saveloading=!0;Promise.all(["form1","form2","formKit0","formKit1","formKit2"].map((e=>d.handleValidates(e)))).then((()=>{l.addTeamData(s.cloneTeamData),s.saveloading=!1})).catch((e=>{s.saveloading=!1,t.$message.error(t.$t("message.saveFailed")+"-"+e.message)}))},handlePaste(){var e,a;const o=JSON.parse(t.$utils.cache.copyData.get());if(!o.teamid)return t.$message.error(t.$t("message.pasteFailed"));let m=o.teamid;s.teamData=l.data.teams&&l.data.teams.find((e=>e.teamid==m));let r=l.data.teamkits&&JSON.parse(JSON.stringify(l.data.teamkits.filter((e=>e.teamtechid==m))));if(!s.teamData)return t.$message.error(t.$t("message.pasteFailed"));s.cloneTeamData={},Object.keys(s.teamData).forEach((e=>{!isNaN(parseFloat(s.teamData[e]))&&isFinite(s.teamData[e])?"rivalteam"===e||e.endsWith("id")?s.cloneTeamData[e]=s.teamData[e]:s.cloneTeamData[e]=parseInt(s.teamData[e]):s.cloneTeamData[e]=s.teamData[e]})),s.cloneTeamData.leagueid=(null==(e=l.data.leagueteamlinks.find((e=>e.teamid==m)))?void 0:e.leagueid)||"-1",s.cloneTeamData.stadiumid=(null==(a=l.data.teamstadiumlinks.find((e=>e.teamid==m)))?void 0:a.stadiumid)||"-1",s.cloneTeamData.teamcolor1=b([s.teamData.teamcolor1r,s.teamData.teamcolor1g,s.teamData.teamcolor1b]),s.cloneTeamData.teamcolor2=b([s.teamData.teamcolor2r,s.teamData.teamcolor2g,s.teamData.teamcolor2b]),s.cloneTeamData.teamcolor3=b([s.teamData.teamcolor3r,s.teamData.teamcolor3g,s.teamData.teamcolor3b]),r&&r.length?(s.cloneTeamData.kits=[],r.forEach((e=>{e.teamcolorsec=b([e.teamcolorsecr,e.teamcolorsecg,e.teamcolorsecb]),e.teamcolorprim=b([e.teamcolorprimr,e.teamcolorprimg,e.teamcolorprimb]),e.teamcolortert=b([e.teamcolortertr,e.teamcolortertg,e.teamcolortertb]),e.jerseynamecolor=b([e.jerseynamecolorr,e.jerseynamecolorg,e.jerseynamecolorb]),s.cloneTeamData.kits.push(e)}))):s.cloneTeamData.kits=[{teamtechid:m,teamkittypetechid:0},{teamtechid:m,teamkittypetechid:1},{teamtechid:m,teamkittypetechid:2}],t.$message.success(t.$t("message.pasteSucceeded"))}};return V((()=>{for(let e=0;e<3;e++)s.cloneTeamData.kits.push({teamtechid:"",teamkittypetechid:e})})),n(r(r(n(r(r({},D(s)),d),{editSpaceStore:l}),o),m),{setRgbTo16:b})}}),A={class:"full-layout flex-column-center scrollbar routerview",style:{"overflow-y":"auto"}},E={class:"flex-between full-w edit-header"},J={class:"flex-end",style:{"margin-left":"10px"}},q={class:"player-box full-layout"},R={class:"tab-1"},M={style:{margin:"20px 0"}},z={class:"tab-1"},W={style:{margin:"20px 0"}},G={class:"tab-1"},H={class:"flex-between full-h"},Q={style:{float:"right"}};var X=f(B,[["render",function(e,a,l,t,o,m){const s=k("ArrowLeftBold"),r=k("el-icon"),n=k("el-button"),i=k("el-input"),d=k("el-form-item"),c=k("stadiumSelector"),u=k("el-input-number"),p=k("el-color-picker"),b=k("teamSelector"),g=k("leagueSelector"),f=k("el-option"),v=k("el-select"),y=k("el-form"),h=k("el-slider"),V=k("el-switch"),D=k("el-empty");return $(),U("div",A,[e.editSpaceStore.isUpload?($(),U(w,{key:0},[S("div",E,[C(r,{class:"back-icon",onClick:a[0]||(a[0]=a=>e.$router.go(-1))},{default:x((()=>[C(s)])),_:1}),S("div",J,[C(n,{type:"success",onClick:e.handleSave,loading:e.saveloading},{default:x((()=>[j(O(e.$t("message.save")),1)])),_:1},8,["onClick","loading"]),C(n,{type:"primary",onClick:e.handlePaste,style:{"margin-left":"10px"}},{default:x((()=>[j(O(e.$t("message.paste")),1)])),_:1},8,["onClick"])])]),S("div",q,[S("div",R,O(e.$t("message.baseData")),1),S("div",M,[C(y,{ref:"form1","scroll-to-error":"","show-message":!1,"inline-message":"",inline:!0,model:e.cloneTeamData,class:"flex-start flex-warp"},{default:x((()=>[C(d,{label:e.$t("message.teamid"),required:"",prop:"teamid"},{default:x((()=>[C(i,{modelValue:e.cloneTeamData.teamid,"onUpdate:modelValue":a[1]||(a[1]=a=>e.cloneTeamData.teamid=a),onInput:e.handleId},null,8,["modelValue","onInput"])])),_:1},8,["label"]),C(d,{label:e.$t("message.stadium"),required:"",prop:"stadiumid"},{default:x((()=>[C(c,{modelValue:e.cloneTeamData.stadiumid,"onUpdate:modelValue":a[2]||(a[2]=a=>e.cloneTeamData.stadiumid=a)},null,8,["modelValue"])])),_:1},8,["label"]),($(!0),U(w,null,_(e.$config.teamBaseData,(a=>($(),T(d,{key:a.label,required:"",prop:a.value?a.value:a.label,label:e.$t(`message.${a.label}`)},{default:x((()=>["input"===a.type?($(),T(i,{key:0,modelValue:e.cloneTeamData[a.label],"onUpdate:modelValue":l=>e.cloneTeamData[a.label]=l},null,8,["modelValue","onUpdate:modelValue"])):"number"===a.type?($(),T(u,{key:1,modelValue:e.cloneTeamData[a.label],"onUpdate:modelValue":l=>e.cloneTeamData[a.label]=l,min:a.min,max:a.max},null,8,["modelValue","onUpdate:modelValue","min","max"])):"color"===a.type?($(),T(p,{key:2,modelValue:e.cloneTeamData[a.label],"onUpdate:modelValue":l=>e.cloneTeamData[a.label]=l,onActiveChange:l=>e.handleColor(l,a.label)},null,8,["modelValue","onUpdate:modelValue","onActiveChange"])):"teamselect"===a.type?($(),T(b,{key:3,modelValue:e.cloneTeamData[a.label],"onUpdate:modelValue":l=>e.cloneTeamData[a.label]=l},null,8,["modelValue","onUpdate:modelValue"])):"leagueselect"===a.type?($(),T(g,{key:4,modelValue:e.cloneTeamData[a.value],"onUpdate:modelValue":l=>e.cloneTeamData[a.value]=l},null,8,["modelValue","onUpdate:modelValue"])):"playerselect"===a.type?($(),T(v,{key:5,modelValue:e.cloneTeamData[a.value],"onUpdate:modelValue":l=>e.cloneTeamData[a.value]=l,multiple:a.multiple,placeholder:e.$t("message.selectPlaceholder")},{default:x((()=>[($(!0),U(w,null,_(e.teamPlayerLineup,(a=>($(),T(f,{key:a.value,label:e.$t(`message.${a.label}`),value:a.value},null,8,["label","value"])))),128))])),_:2},1032,["modelValue","onUpdate:modelValue","multiple","placeholder"])):P("",!0)])),_:2},1032,["prop","label"])))),128))])),_:1},8,["model"])]),S("div",z,O(e.$t("message.tactic")),1),S("div",W,[C(y,{ref:"form2","scroll-to-error":"","show-message":!1,"inline-message":"",inline:!0,model:e.cloneTeamData,class:"flex-start flex-warp"},{default:x((()=>[($(!0),U(w,null,_(e.$config.teamTactic,(a=>($(),T(d,{key:a.label,required:"",prop:a.value?a.value:a.label,label:e.$t(`message.${a.label}`),style:{"margin-bottom":"30px"}},{default:x((()=>["slide"===a.type?($(),T(h,{key:0,modelValue:e.cloneTeamData[a.label],"onUpdate:modelValue":l=>e.cloneTeamData[a.label]=l,min:1,max:100,step:1,marks:e.marks},null,8,["modelValue","onUpdate:modelValue","marks"])):"select"===a.type?($(),T(v,{key:1,modelValue:e.cloneTeamData[a.label],"onUpdate:modelValue":l=>e.cloneTeamData[a.label]=l,placeholder:e.$t("message.selectPlaceholder")},{default:x((()=>[($(!0),U(w,null,_(a.data,(a=>($(),T(f,{key:a.value,label:e.$t(`message.${a.label}`),value:a.value},null,8,["label","value"])))),128))])),_:2},1032,["modelValue","onUpdate:modelValue","placeholder"])):P("",!0)])),_:2},1032,["prop","label"])))),128))])),_:1},8,["model"])]),S("div",G,O(e.$t("message.jersey")),1),($(!0),U(w,null,_(e.cloneTeamData.kits,((a,l)=>($(),U("div",{style:{margin:"20px 0"},key:a.teamkitid},[S("div",{class:"tab-1",style:N({borderLeftColor:e.setRgbTo16([a.teamcolorsecr,a.teamcolorsecg,a.teamcolorsecb])})},O(e.$t(`message.jersey${a.teamkittypetechid}`)),5),C(y,{ref_for:!0,ref:`formKit${l}`,"scroll-to-error":"","show-message":!1,"inline-message":"",inline:!0,model:a,class:"flex-start flex-warp"},{default:x((()=>[($(!0),U(w,null,_(e.$config.teamKits,(t=>($(),T(d,{key:t.label,required:"",prop:t.value?t.value:t.label,label:e.$t(`message.${t.label}`)},{default:x((()=>["number"===t.type?($(),T(u,{key:0,modelValue:a[t.label],"onUpdate:modelValue":e=>a[t.label]=e,min:t.min,max:t.max},null,8,["modelValue","onUpdate:modelValue","min","max"])):"color"===t.type?($(),T(p,{key:1,modelValue:a[t.label],"onUpdate:modelValue":e=>a[t.label]=e,onActiveChange:a=>e.handleKitColor(a,t.label,l)},null,8,["modelValue","onUpdate:modelValue","onActiveChange"])):"select"!==t.type||t.iscustom?"select"===t.type&&t.iscustom?($(),T(v,{key:3,modelValue:a[t.label],"onUpdate:modelValue":e=>a[t.label]=e,multiple:t.multiple,placeholder:e.$t("message.selectPlaceholder")},{default:x((()=>[($(!0),U(w,null,_(t.data,(e=>($(),T(f,{key:e.value,label:e.label,value:e.value},{default:x((()=>[S("div",H,[S("span",{style:N({backgroundColor:e.label}),class:"select-color"},null,4),S("span",Q,O(e.label),1)])])),_:2},1032,["label","value"])))),128))])),_:2},1032,["modelValue","onUpdate:modelValue","multiple","placeholder"])):"switch"===t.type?($(),T(V,{key:4,modelValue:a[t.label],"onUpdate:modelValue":e=>a[t.label]=e,"active-value":t.activeValue,"inactive-value":t.inactiveValue,"active-text":e.$t("message.yes"),"inactive-text":e.$t("message.no")},null,8,["modelValue","onUpdate:modelValue","active-value","inactive-value","active-text","inactive-text"])):P("",!0):($(),T(v,{key:2,modelValue:a[t.label],"onUpdate:modelValue":e=>a[t.label]=e,multiple:t.multiple,placeholder:e.$t("message.selectPlaceholder")},{default:x((()=>[($(!0),U(w,null,_(t.data,(a=>($(),T(f,{key:a.value,label:e.$t(`message.${a.label}`),value:a.value},null,8,["label","value"])))),128))])),_:2},1032,["modelValue","onUpdate:modelValue","multiple","placeholder"]))])),_:2},1032,["prop","label"])))),128))])),_:2},1032,["model"])])))),128))])],64)):($(),T(D,{key:1,description:e.$t("message.errorInfo")},null,8,["description"]))])}],["__scopeId","data-v-45eb2da4"]]);export{X as default};
