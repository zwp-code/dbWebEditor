var e=Object.defineProperty,a=Object.defineProperties,l=Object.getOwnPropertyDescriptors,t=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,m=Object.prototype.propertyIsEnumerable,i=(a,l,t)=>l in a?e(a,l,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[l]=t,s=(e,a)=>{for(var l in a||(a={}))o.call(a,l)&&i(e,l,a[l]);if(t)for(var l of t(a))m.call(a,l)&&i(e,l,a[l]);return e},n=(e,t)=>a(e,l(t));import{_ as d}from"./notflag-60268a62.js";import{_ as r}from"./team_notfound-5b1be68a.js";import{u as c}from"./editSpace-01fbe83a.js";import{u,t as p}from"./teamSelector-fec8c03f.js";import{u as g}from"./usePlayers-ec9510d6.js";import{l as b}from"./leagueSelector-789e633e.js";import{_ as f}from"./plugin-vue_export-helper-46f75680.js";import{d as y,r as v,k as D,t as h,a as k,o as V,c as T,w as x,b as $,f as S,j as C,h as _,e as U,F as j,p as w,i as L,J as P,g as O}from"./index-efd15d41.js";import{s as N,b as F}from"./util-c39de5c8.js";const A=y({name:"StadiumSelectDialog",components:{},props:{visible:{type:Boolean,default:!1},stadium:{type:String,default:"-1"}},emits:["close","save"],setup(e,a){const l=c();let t=v({dialogVisible:e.visible,stadiumList:l.getAllStadiumList(),currentStadium:{}}),o={handleClose(){o.getCurrentStadium(),t.dialogVisible=!1,a.emit("close")},handleConfirm(){a.emit("save",t.currentStadium.value),t.dialogVisible=!1,a.emit("close")},getCurrentStadium(){let a=t.stadiumList.find((a=>a.value==e.stadium));t.currentStadium=a||{value:"-1",label:"No Stadium"}},handleChange(e){let a=t.stadiumList.findIndex((e=>e.value==t.currentStadium.value));if(e>0){let e=a+1;e>t.stadiumList.length-1&&(e=0),t.currentStadium=t.stadiumList[e]}else{let e=a-1;e<0&&(e=t.stadiumList.length-1),t.currentStadium=t.stadiumList[e]}}};return D((()=>{o.getCurrentStadium()})),s(s(s({},h(t)),o),u())}}),E={class:"flex-column-center"},I={class:"stadium-selector-box"},B={class:"flex-center"},q={class:"stadium-img-box"},z={class:"flex-center"},J={style:{"margin-top":"20px"}},K={class:"dialog-footer"};const R=y({name:"TeamEdit",components:{teamSelector:p,leagueSelector:b,StadiumSelectDialog:f(A,[["render",function(e,a,l,t,o,m){const i=k("CaretLeft"),s=k("el-icon"),n=k("el-image"),d=k("CaretRight"),r=k("el-button"),c=k("el-dialog");return V(),T(c,{modelValue:e.dialogVisible,"onUpdate:modelValue":a[2]||(a[2]=a=>e.dialogVisible=a),title:e.$t("message.stadiumselect"),"before-close":e.handleClose,"custom-class":"z-dialog",center:"",width:500},{footer:x((()=>[$("span",K,[S(r,{onClick:e.handleClose},{default:x((()=>[C(_(e.$t("message.cancel")),1)])),_:1},8,["onClick"]),S(r,{type:"primary",onClick:e.handleConfirm},{default:x((()=>[C(_(e.$t("message.confirm")),1)])),_:1},8,["onClick"])])])),default:x((()=>[$("div",E,[$("div",I,[$("div",B,[S(s,{onClick:a[0]||(a[0]=a=>e.handleChange(-1))},{default:x((()=>[S(i)])),_:1})]),$("div",q,[S(n,{style:{height:"100%",width:"100%"},lazy:"",src:e.getStadiumBackground(e.currentStadium.value),fit:"cover"},null,8,["src"])]),$("div",z,[S(s,{onClick:a[1]||(a[1]=a=>e.handleChange(1))},{default:x((()=>[S(d)])),_:1})])]),$("p",J,_(e.currentStadium.label),1)])])),_:1},8,["modelValue","title","before-close"])}],["__scopeId","data-v-1b838803"]])},props:{},setup(e,a){const l=c(),{proxy:i}=O(),d=u(),r=g();let p=v({teamData:null,cloneTeamData:null,isNotFound:!1,teamPlayerLineup:null,marks:{10:"10",50:"50",90:"90"},stadiumVisible:!1,saveloading:!1}),b={handleColor(e,a){let l=F(e);p.cloneTeamData[`${a}r`]=l[0],p.cloneTeamData[`${a}g`]=l[1],p.cloneTeamData[`${a}b`]=l[2]},handleKitColor(e,a,l){let t=F(e);p.cloneTeamData.kits[l][`${a}r`]=t[0],p.cloneTeamData.kits[l][`${a}g`]=t[1],p.cloneTeamData.kits[l][`${a}b`]=t[2]},getTeamData(){var e,a;const t=i.$route.query.teamid;p.teamData=l.data.teams&&l.data.teams.find((e=>e.teamid==t));let o=l.data.teamkits&&l.data.teamkits.filter((e=>e.teamtechid==t));if(!p.teamData)return p.isNotFound=!0,void i.$message.warning(`${i.$t("message.notfoundteam")}`);p.cloneTeamData={},Object.keys(p.teamData).forEach((e=>{!isNaN(parseFloat(p.teamData[e]))&&isFinite(p.teamData[e])?"rivalteam"===e||e.endsWith("id")?p.cloneTeamData[e]=p.teamData[e]:p.cloneTeamData[e]=parseInt(p.teamData[e]):p.cloneTeamData[e]=p.teamData[e]})),p.cloneTeamData.leagueid=(null==(e=l.data.leagueteamlinks.find((e=>e.teamid==t)))?void 0:e.leagueid)||"-1",p.cloneTeamData.stadiumid=(null==(a=l.data.teamstadiumlinks.find((e=>e.teamid==t)))?void 0:a.stadiumid)||"-1",p.cloneTeamData.teamcolor1=N([p.teamData.teamcolor1r,p.teamData.teamcolor1g,p.teamData.teamcolor1b]),p.cloneTeamData.teamcolor2=N([p.teamData.teamcolor2r,p.teamData.teamcolor2g,p.teamData.teamcolor2b]),p.cloneTeamData.teamcolor3=N([p.teamData.teamcolor3r,p.teamData.teamcolor3g,p.teamData.teamcolor3b]),o&&o.length?(p.cloneTeamData.kits=[],o.forEach((e=>{e.teamcolorsec=N([e.teamcolorsecr,e.teamcolorsecg,e.teamcolorsecb]),e.teamcolorprim=N([e.teamcolorprimr,e.teamcolorprimg,e.teamcolorprimb]),e.teamcolortert=N([e.teamcolortertr,e.teamcolortertg,e.teamcolortertb]),e.jerseynamecolor=N([e.jerseynamecolorr,e.jerseynamecolorg,e.jerseynamecolorb]),p.cloneTeamData.kits.push(e)}))):p.cloneTeamData.kits=[{teamtechid:t,teamkittypetechid:0},{teamtechid:t,teamkittypetechid:1},{teamtechid:t,teamkittypetechid:2}]},getTeamPlayerLineup(){const e=i.$route.query.teamid;if(!l.data.teamplayerlinks)return;let a=l.data.teamplayerlinks.map((a=>{let t=null;a.teamid==e&&(t=l.data.players.find((e=>e.playerid==a.playerid)));let o=t?r.getPlayerName.value(t.firstnameid,t.lastnameid,t.commonnameid):"";return t?{label:o,value:a.playerid,playerdata:t}:null}));p.teamPlayerLineup=a.filter(Boolean)},handleSave(){p.saveloading=!0;const e=JSON.parse(JSON.stringify(p.cloneTeamData)),{leagueid:a,stadiumid:i,teamcolor1:s,teamcolor2:n,teamcolor3:d,kits:r}=e,c=((e,a)=>{var l={};for(var i in e)o.call(e,i)&&a.indexOf(i)<0&&(l[i]=e[i]);if(null!=e&&t)for(var i of t(e))a.indexOf(i)<0&&m.call(e,i)&&(l[i]=e[i]);return l})(e,["leagueid","stadiumid","teamcolor1","teamcolor2","teamcolor3","kits"]);l.saveTeamData(c,{leagueid:a,stadiumid:i,kits:r}),p.saveloading=!1}};return D((()=>{b.getTeamPlayerLineup(),b.getTeamData()})),n(s(s(n(s(s({},h(p)),b),{editSpaceStore:l}),d),r),{setRgbTo16:N})}}),M={class:"full-layout flex-column-center scrollbar routerview",style:{"overflow-y":"auto"}},W={class:"flex-between full-w edit-header"},G={class:"flex-end",style:{"margin-left":"10px"}},H={class:"player-box full-layout"},Q={class:"flex-between flex-warp"},X={class:"flex-start",style:{"align-items":"flex-end"}},Y={class:"player-avatar"},Z={class:"image-slot"},ee=["src"],ae={class:"image-slot"},le=["src"],te={class:"flex-column-end player-info"},oe={class:"player-name text-left"},me={class:"flex-start"},ie=["src"],se={class:"player-formation"},ne={class:"flex-between player-team"},de={class:"img-box",style:{height:"80px"}},re=["src","title"],ce=["src","title"],ue={class:"tab-1"},pe={style:{margin:"20px 0"}},ge={class:"tab-1"},be={style:{margin:"20px 0"}},fe={class:"tab-1"},ye={class:"flex-between full-h"},ve={style:{float:"right"}};var De=f(R,[["render",function(e,a,l,t,o,m){const i=k("ArrowLeftBold"),s=k("el-icon"),n=k("el-button"),c=k("el-skeleton"),u=k("el-empty"),p=k("el-image"),g=k("el-avatar"),b=k("el-input"),f=k("el-input-number"),y=k("el-color-picker"),v=k("teamSelector"),D=k("leagueSelector"),h=k("el-option"),O=k("el-select"),N=k("el-form-item"),F=k("el-form"),A=k("el-slider"),E=k("el-switch"),I=k("StadiumSelectDialog");return V(),U("div",M,[e.editSpaceStore.isUpload?(V(),U(j,{key:0},[$("div",W,[S(s,{class:"back-icon",onClick:a[0]||(a[0]=a=>e.$router.go(-1))},{default:x((()=>[S(i)])),_:1}),$("div",G,[S(n,{type:"success",onClick:e.handleSave,loading:e.saveloading},{default:x((()=>[C(_(e.$t("message.save")),1)])),_:1},8,["onClick","loading"])])]),$("div",H,[e.teamData||e.isNotFound?!e.teamData&&e.isNotFound?(V(),T(u,{key:1,description:e.$t("message.notfoundteam")},null,8,["description"])):(V(),U(j,{key:2},[$("div",Q,[$("div",X,[$("div",Y,[S(p,{style:{height:"100%",width:"100%"},lazy:"",src:e.getTeamAvatar(e.teamData.teamid,120),fit:"cover"},{placeholder:x((()=>[$("div",Z,[$("img",{src:r,style:{"object-fit":"cover"}},null,8,ee)])])),error:x((()=>[$("div",ae,[$("img",{src:r,style:{"object-fit":"cover"}},null,8,le)])])),_:1},8,["src"])]),$("div",te,[$("p",oe,_(e.teamData.teamname+`  (${e.teamData.teamid})`),1),$("div",me,[S(g,{shape:"square",size:24,style:{width:"24px",height:"16px"},fit:"cover",src:e.getTeamNationFlag(e.teamData.teamid),onError:e=>!0},{default:x((()=>[$("img",{src:d},null,8,ie)])),_:1},8,["src"]),$("span",se,_(e.getTeamLeagueName(e.teamData.teamid)),1)])])]),$("div",ne,[$("div",de,[$("img",{src:"/static/png/lineup-4c5aa955.png",onClick:a[1]||(a[1]=a=>e.$router.push({name:"teamLineupEdit",query:{teamid:e.cloneTeamData.teamid}})),style:{transform:"rotate(90deg)"},title:e.$t("message.lineupManagement")},null,8,re)]),$("div",{class:"img-box",onClick:a[2]||(a[2]=a=>e.stadiumVisible=!0)},[$("img",{src:"/static/png/stadium-a3169e20.png",title:e.$t("message.stadiumManagement")},null,8,ce)])])]),e.cloneTeamData&&e.cloneTeamData.teamid?(V(),U(j,{key:0},[$("div",ue,_(e.$t("message.baseData")),1),$("div",pe,[S(F,{inline:!0,model:e.cloneTeamData,class:"flex-start flex-warp"},{default:x((()=>[(V(!0),U(j,null,w(e.$config.teamBaseData,(a=>(V(),T(N,{key:a.label,label:e.$t(`message.${a.label}`)},{default:x((()=>["input"===a.type?(V(),T(b,{key:0,modelValue:e.cloneTeamData[a.label],"onUpdate:modelValue":l=>e.cloneTeamData[a.label]=l},null,8,["modelValue","onUpdate:modelValue"])):"number"===a.type?(V(),T(f,{key:1,modelValue:e.cloneTeamData[a.label],"onUpdate:modelValue":l=>e.cloneTeamData[a.label]=l,min:a.min,max:a.max},null,8,["modelValue","onUpdate:modelValue","min","max"])):"color"===a.type?(V(),T(y,{key:2,modelValue:e.cloneTeamData[a.label],"onUpdate:modelValue":l=>e.cloneTeamData[a.label]=l,onActiveChange:l=>e.handleColor(l,a.label)},null,8,["modelValue","onUpdate:modelValue","onActiveChange"])):"teamselect"===a.type?(V(),T(v,{key:3,modelValue:e.cloneTeamData[a.label],"onUpdate:modelValue":l=>e.cloneTeamData[a.label]=l},null,8,["modelValue","onUpdate:modelValue"])):"leagueselect"===a.type?(V(),T(D,{key:4,modelValue:e.cloneTeamData[a.value],"onUpdate:modelValue":l=>e.cloneTeamData[a.value]=l},null,8,["modelValue","onUpdate:modelValue"])):"playerselect"===a.type?(V(),T(O,{key:5,modelValue:e.cloneTeamData[a.value],"onUpdate:modelValue":l=>e.cloneTeamData[a.value]=l,multiple:a.multiple,placeholder:e.$t("message.selectPlaceholder")},{default:x((()=>[(V(!0),U(j,null,w(e.teamPlayerLineup,(e=>(V(),T(h,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:2},1032,["modelValue","onUpdate:modelValue","multiple","placeholder"])):L("",!0)])),_:2},1032,["label"])))),128))])),_:1},8,["model"])]),$("div",ge,_(e.$t("message.tactic")),1),$("div",be,[S(F,{inline:!0,model:e.cloneTeamData,class:"flex-start flex-warp"},{default:x((()=>[(V(!0),U(j,null,w(e.$config.teamTactic,(a=>(V(),T(N,{key:a.label,label:e.$t(`message.${a.label}`),style:{"margin-bottom":"30px"}},{default:x((()=>["slide"===a.type?(V(),T(A,{key:0,modelValue:e.cloneTeamData[a.label],"onUpdate:modelValue":l=>e.cloneTeamData[a.label]=l,min:1,max:100,step:1,marks:e.marks},null,8,["modelValue","onUpdate:modelValue","marks"])):"select"===a.type?(V(),T(O,{key:1,modelValue:e.cloneTeamData[a.label],"onUpdate:modelValue":l=>e.cloneTeamData[a.label]=l,placeholder:e.$t("message.selectPlaceholder")},{default:x((()=>[(V(!0),U(j,null,w(a.data,(a=>(V(),T(h,{key:a.value,label:e.$t(`message.${a.label}`),value:a.value},null,8,["label","value"])))),128))])),_:2},1032,["modelValue","onUpdate:modelValue","placeholder"])):L("",!0)])),_:2},1032,["label"])))),128))])),_:1},8,["model"])]),$("div",fe,_(e.$t("message.jersey")),1),(V(!0),U(j,null,w(e.cloneTeamData.kits,((a,l)=>(V(),U("div",{style:{margin:"20px 0"},key:a.teamkitid},[$("div",{class:"tab-1",style:P({borderLeftColor:e.setRgbTo16([a.teamcolorsecr,a.teamcolorsecg,a.teamcolorsecb])})},_(e.$t(`message.jersey${a.teamkittypetechid}`)),5),S(F,{inline:!0,model:a,class:"flex-start flex-warp"},{default:x((()=>[(V(!0),U(j,null,w(e.$config.teamKits,(t=>(V(),T(N,{key:t.label,label:e.$t(`message.${t.label}`)},{default:x((()=>["number"===t.type?(V(),T(f,{key:0,modelValue:a[t.label],"onUpdate:modelValue":e=>a[t.label]=e,min:t.min,max:t.max},null,8,["modelValue","onUpdate:modelValue","min","max"])):"color"===t.type?(V(),T(y,{key:1,modelValue:a[t.label],"onUpdate:modelValue":e=>a[t.label]=e,onActiveChange:a=>e.handleKitColor(a,t.label,l)},null,8,["modelValue","onUpdate:modelValue","onActiveChange"])):"select"!==t.type||t.iscustom?"select"===t.type&&t.iscustom?(V(),T(O,{key:3,modelValue:a[t.label],"onUpdate:modelValue":e=>a[t.label]=e,multiple:t.multiple,placeholder:e.$t("message.selectPlaceholder")},{default:x((()=>[(V(!0),U(j,null,w(t.data,(e=>(V(),T(h,{key:e.value,label:e.label,value:e.value},{default:x((()=>[$("div",ye,[$("span",{style:P({backgroundColor:e.label}),class:"select-color"},null,4),$("span",ve,_(e.label),1)])])),_:2},1032,["label","value"])))),128))])),_:2},1032,["modelValue","onUpdate:modelValue","multiple","placeholder"])):"switch"===t.type?(V(),T(E,{key:4,modelValue:a[t.label],"onUpdate:modelValue":e=>a[t.label]=e,"active-value":t.activeValue,"inactive-value":t.inactiveValue,"active-text":e.$t("message.yes"),"inactive-text":e.$t("message.no")},null,8,["modelValue","onUpdate:modelValue","active-value","inactive-value","active-text","inactive-text"])):L("",!0):(V(),T(O,{key:2,modelValue:a[t.label],"onUpdate:modelValue":e=>a[t.label]=e,multiple:t.multiple,placeholder:e.$t("message.selectPlaceholder")},{default:x((()=>[(V(!0),U(j,null,w(t.data,(a=>(V(),T(h,{key:a.value,label:e.$t(`message.${a.label}`),value:a.value},null,8,["label","value"])))),128))])),_:2},1032,["modelValue","onUpdate:modelValue","multiple","placeholder"]))])),_:2},1032,["label"])))),128))])),_:2},1032,["model"])])))),128))],64)):L("",!0)],64)):(V(),T(c,{key:0,rows:20,animated:""}))])],64)):(V(),T(u,{key:1,description:e.$t("message.errorInfo")},null,8,["description"])),e.stadiumVisible?(V(),T(I,{key:2,visible:e.stadiumVisible,stadium:e.cloneTeamData.stadiumid,onSave:a[3]||(a[3]=a=>e.cloneTeamData.stadiumid=a),onClose:a[4]||(a[4]=a=>e.stadiumVisible=!1)},null,8,["visible","stadium"])):L("",!0)])}],["__scopeId","data-v-42748735"]]);export{De as default};
